<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>苟富</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://gaufoo.com/"/>
  <updated>2017-12-09T07:21:36.400Z</updated>
  <id>http://gaufoo.com/</id>
  
  <author>
    <name>Gaufoo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>听说C语言也可以“泛型”</title>
    <link href="http://gaufoo.com/2017/12/09/genericC/"/>
    <id>http://gaufoo.com/2017/12/09/genericC/</id>
    <published>2017-12-09T07:02:51.000Z</published>
    <updated>2017-12-09T07:21:36.400Z</updated>
    
    <content type="html"><![CDATA[<p>都说泛型是C++的一大特性，我大C语言表示不服</p>
<a id="more"></a>
<hr>
<h1 id="再探类型"><a href="#再探类型" class="headerlink" title="再探类型"></a>再探类型</h1><p>C/C++类型由以下各项组成：</p>
<ul>
<li>内存里的’0’、’1’序列</li>
<li>‘0’、’1’串占用的内存大小</li>
<li>作为操作数时如何解释与输出位模式（如cout、printf、强制类型转换）</li>
<li>作为操作数时如何修改位模式（如+、-、*、/）</li>
</ul>
<h1 id="“泛型”原理"><a href="#“泛型”原理" class="headerlink" title="“泛型”原理"></a>“泛型”原理</h1><hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;都说泛型是C++的一大特性，我大C语言表示不服&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/C/"/>
    
    
      <category term="C" scheme="http://gaufoo.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>AppInventor2复刻FlappyBird</title>
    <link href="http://gaufoo.com/2017/12/08/appinventor/"/>
    <id>http://gaufoo.com/2017/12/08/appinventor/</id>
    <published>2017-12-08T08:13:19.000Z</published>
    <updated>2017-12-09T07:27:57.570Z</updated>
    
    <content type="html"><![CDATA[<p>数字创意设计课程大作业。</p>
<a id="more"></a>
<hr>
<h1 id="画布、图像精灵控件的优点与缺陷"><a href="#画布、图像精灵控件的优点与缺陷" class="headerlink" title="画布、图像精灵控件的优点与缺陷"></a>画布、图像精灵控件的优点与缺陷</h1><ul>
<li>图像精灵只能放在画布内</li>
</ul>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul>
<li>自带与其他图像精灵的碰撞检测</li>
<li>具有自主行为：根据属性值进行移动、旋转</li>
</ul>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>精灵的X、Y坐标不能取负值，换句话说，不能从屏幕左端、上端移出屏幕。这给动画实现带来困难。</li>
</ul>
<hr>
<h1 id="核心模块"><a href="#核心模块" class="headerlink" title="核心模块"></a>核心模块</h1><h2 id="小鸟飞行动画实现"><a href="#小鸟飞行动画实现" class="headerlink" title="小鸟飞行动画实现"></a>小鸟飞行动画实现</h2><p>将小鸟动作分解成一系列的图片，定时按序更换图片。<br><img src="/images/flappybird/bird.png"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p><img src="/images/flappybird/bird1.png" width="500px"></p>
<hr>
<h2 id="地面移动动画模拟"><a href="#地面移动动画模拟" class="headerlink" title="地面移动动画模拟"></a>地面移动动画模拟</h2><p>地面图像的X坐标定时减少一小步，减少到特定值后跳回去一大步。换句话说，地面的移动轨迹会是 左左左右左左左右左左左右……<br>到这里，画布的缺陷导致需要有一块“幕布”来遮挡最左边的部分。<br><img src="/images/flappybird/moveground1.jpg"></p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><p><img src="/images/flappybird/wall.png" width="500px"></p>
<hr>
<h2 id="小鸟控制实现"><a href="#小鸟控制实现" class="headerlink" title="小鸟控制实现"></a>小鸟控制实现</h2><p>表现：</p>
<ul>
<li>游戏开始后，触碰屏幕时，小鸟跳起，头朝上抬起</li>
<li>游戏开始后，不触碰屏幕时，小鸟受重力作用向下坠落，头往下垂</li>
</ul>
<p>实现：</p>
<ul>
<li>角度：点击屏幕，角度设为45度，再定时减少10度</li>
<li>位置：点击屏幕，速度设为负数（如-20），再定时 速度&lt;-加速度+速度，Y坐标&lt;-速度+Y坐标</li>
</ul>
<h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><p><img src="/images/flappybird/clickBird.png" width="500px"></p>
<hr>
<h2 id="柱子数据存储结构"><a href="#柱子数据存储结构" class="headerlink" title="柱子数据存储结构"></a>柱子数据存储结构</h2><p>一共有三组柱子，每组柱子里有上柱子、增分板（下文介绍它的作用）、下柱子。容易想到用二维数组来存储。<br><img src="/images/flappybird/pipes1.jpg"></p>
<p><img src="/images/flappybird/pipeStruct.png" width="500px"></p>
<hr>
<h2 id="无限柱子随机高度生成与移动"><a href="#无限柱子随机高度生成与移动" class="headerlink" title="无限柱子随机高度生成与移动"></a>无限柱子随机高度生成与移动</h2><h3 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h3><p>这里利用图像精灵自带的方向、速度、时间间隔属性，让柱子自己移动。<br><img src="/images/flappybird/pipeproperty.png" width="500px"></p>
<h3 id="随机高度"><a href="#随机高度" class="headerlink" title="随机高度"></a>随机高度</h3><p>屏幕上方放有幕布。生成柱子时，上柱子的Y坐标在幕布高度范围内随机生成，增分板和下柱子依据上柱子的Y坐标计算而得。</p>
<h3 id="无限柱子"><a href="#无限柱子" class="headerlink" title="无限柱子"></a>无限柱子</h3><p>游戏初始化时，每组柱子在屏幕外排好。<br><img src="/images/flappybird/initpipes1.jpg"><br>当每组柱子到达屏幕最左边，让其直接跳到最右边柱子的右边（在屏幕外），用三组柱子模拟无限组柱子。<br><img src="/images/flappybird/movepipes1.jpg"></p>
<h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h3><p>柱子初始化<br><img src="/images/flappybird/initpipe.png" width="500px"><br>柱子到达最左边后更新<br><img src="/images/flappybird/p1.png" width="500px"><br><img src="/images/flappybird/p2.png" width="500px"><br><img src="/images/flappybird/p3.png" width="500px"></p>
<hr>
<h2 id="柱子与鸟碰撞检测"><a href="#柱子与鸟碰撞检测" class="headerlink" title="柱子与鸟碰撞检测"></a>柱子与鸟碰撞检测</h2><p>这里可以利用图像精灵自带的碰撞检测。另，控件自带碰撞检测是支撑我做这个项目的所有理由。</p>
<h3 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h3><p>鸟碰到任何一根柱子就GameOver<br><img src="/images/flappybird/birdcopipe.png" width="500px"></p>
<hr>
<h2 id="得分实现策略"><a href="#得分实现策略" class="headerlink" title="得分实现策略"></a>得分实现策略</h2><p>总算要提及奇怪的增分板的作用，其实是供小鸟碰撞，撞到后分数+1</p>
<h3 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h3><p><img src="/images/flappybird/getscore.png" width="500px"></p>
<hr>
<h2 id="标题显示模块"><a href="#标题显示模块" class="headerlink" title="标题显示模块"></a>标题显示模块</h2><p>选择时机更换标题图片并显示标题<br><img src="/images/flappybird/text_ready.png"><br><img src="/images/flappybird/text_game_over.png"><br><img src="/images/flappybird/title.png" width="500px"></p>
<hr>
<h2 id="分数显示模块"><a href="#分数显示模块" class="headerlink" title="分数显示模块"></a>分数显示模块</h2><p>分数包含10个十进制基数，所以要准备十张图片，分数更新时更新图片。</p>
<h3 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h3><p><img src="/images/flappybird/score.png" width="500px"></p>
<hr>
<h2 id="分数结算板显示模块"><a href="#分数结算板显示模块" class="headerlink" title="分数结算板显示模块"></a>分数结算板显示模块</h2><p>显示所得分与最高分，最高分显然要用到微数据库，分数显示方法同上</p>
<h3 id="代码-7"><a href="#代码-7" class="headerlink" title="代码"></a>代码</h3><p><img src="/images/flappybird/panel.png" width="500px"></p>
<hr>
<h1 id="驱动模块"><a href="#驱动模块" class="headerlink" title="驱动模块"></a>驱动模块</h1><h2 id="程序入口"><a href="#程序入口" class="headerlink" title="程序入口"></a>程序入口</h2><ul>
<li>设置参数</li>
<li>初始化所有图片尺寸</li>
<li>初始化游戏</li>
</ul>
<p><img src="/images/flappybird/main.png" width="500px"></p>
<hr>
<h3 id="初始化所有图片尺寸"><a href="#初始化所有图片尺寸" class="headerlink" title="初始化所有图片尺寸"></a>初始化所有图片尺寸</h3><p><img src="/images/flappybird/initsize.png"></p>
<h4 id="初始化图片尺寸举例"><a href="#初始化图片尺寸举例" class="headerlink" title="初始化图片尺寸举例"></a>初始化图片尺寸举例</h4><p>地面<br><img src="/images/flappybird/initwallsize.png" width="500px"><br>柱子<br><img src="/images/flappybird/initpipesize.png" width="500px"></p>
<hr>
<h3 id="初始化游戏"><a href="#初始化游戏" class="headerlink" title="初始化游戏"></a>初始化游戏</h3><p>未开始游戏时的界面，有“Get Ready”标题。<br><img src="/images/flappybird/initgame.png"></p>
<hr>
<h4 id="初始化所有物件位置"><a href="#初始化所有物件位置" class="headerlink" title="初始化所有物件位置"></a>初始化所有物件位置</h4><p><img src="/images/flappybird/initloc1.png"><br><strong>举例</strong><br>标题<br><img src="/images/flappybird/inittitleloc.png" width="500px"><br>柱子<br><img src="/images/flappybird/initpipeloc.png" width="500px"></p>
<hr>
<h2 id="开始游戏"><a href="#开始游戏" class="headerlink" title="开始游戏"></a>开始游戏</h2><p>当游戏未开始时，触摸屏幕开始游戏。<br><img src="/images/flappybird/startgame.png" width="500px"></p>
<p>开始游戏，标题消失，分数显示，游戏元素启动。<br><img src="/images/flappybird/startgame1.png" width="500px"></p>
<hr>
<h2 id="游戏结束"><a href="#游戏结束" class="headerlink" title="游戏结束"></a>游戏结束</h2><p>当鸟碰到柱子时游戏结束。</p>
<p>定格画面，显示“Game Over”标题，更新最高分，显示分数结算板。<br><img src="/images/flappybird/gameover.png" width="500px"></p>
<hr>
<h1 id="辅助模块"><a href="#辅助模块" class="headerlink" title="辅助模块"></a>辅助模块</h1><p>主要是关于各物件的静止、启动、显示、隐藏。<br><img src="/images/flappybird/thingaux.png" width="500px"></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;数字创意设计课程大作业。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://gaufoo.com/categories/Android/"/>
    
      <category term="AppInventor2" scheme="http://gaufoo.com/categories/Android/AppInventor2/"/>
    
    
      <category term="Android" scheme="http://gaufoo.com/tags/Android/"/>
    
      <category term="AppInventor2" scheme="http://gaufoo.com/tags/AppInventor2/"/>
    
  </entry>
  
  <entry>
    <title>RE转NFA，NFA转DFA</title>
    <link href="http://gaufoo.com/2017/10/29/REtoNFAtoDFA/"/>
    <id>http://gaufoo.com/2017/10/29/REtoNFAtoDFA/</id>
    <published>2017-10-29T12:09:54.000Z</published>
    <updated>2017-10-31T16:06:34.022Z</updated>
    
    <content type="html"><![CDATA[<p>简单笔记</p>
<a id="more"></a>
<hr>
<h2 id="Thompson算法-——-RE-gt-NFA"><a href="#Thompson算法-——-RE-gt-NFA" class="headerlink" title="Thompson算法 —— RE -&gt; NFA"></a>Thompson算法 —— RE -&gt; NFA</h2><h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><ul>
<li>基本的RE直接构造</li>
<li>复合的RE递归构造</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">e</div><div class="line">  -&gt; eps</div><div class="line">  -&gt; 单个字符c	// 前两种可以直接构造</div><div class="line">  -&gt; e1e2</div><div class="line">  -&gt; e1|e2</div><div class="line">  -&gt; e1*	// 后三种递归构造</div></pre></td></tr></table></figure>
<h3 id="eps"><a href="#eps" class="headerlink" title="eps"></a>eps</h3><p><img src="/images/vrhr/20171029202723.png"></p>
<h3 id="c"><a href="#c" class="headerlink" title="c"></a>c</h3><p><img src="/images/vrhr/20171029202934.png"></p>
<h3 id="e1e2"><a href="#e1e2" class="headerlink" title="e1e2"></a>e1e2</h3><p><img src="/images/vrhr/20171029203142.png"></p>
<h3 id="e1-e2"><a href="#e1-e2" class="headerlink" title="e1|e2"></a>e1|e2</h3><p><img src="/images/vrhr/20171029203543.png"></p>
<h3 id="e1"><a href="#e1" class="headerlink" title="e1*"></a>e1*</h3><p><img src="/images/vrhr/20171029203828.png"></p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><blockquote>
<p>a(b|c)*</p>
</blockquote>
<p><img src="/images/vrhr/20171029205037.png"></p>
<hr>
<h2 id="子集构造算法-——-NFA-gt-DFA"><a href="#子集构造算法-——-NFA-gt-DFA" class="headerlink" title="子集构造算法 —— NFA -&gt; DFA"></a>子集构造算法 —— NFA -&gt; DFA</h2><h3 id="基本思想-1"><a href="#基本思想-1" class="headerlink" title="基本思想"></a>基本思想</h3><p><img src="/images/vrhr/20171029205037.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">- 0 	  			 =&gt; 记为q0，添加进Q状态集中，下同</div><div class="line"></div><div class="line">- q0	——a——&gt; 1</div><div class="line">	==a(eps)==&gt; 1 2 3 4 6 *9 =&gt; 记为q1</div><div class="line"></div><div class="line">- q1	——b——&gt; 5				// delta(q1)集合，对每个q1元素的b通路</div><div class="line">	==b(eps)==&gt; 5 8 *9 3 4 6 =&gt; 记为q2	// eps-闭包(eps-closure)</div><div class="line">	——c——&gt; 7</div><div class="line">	==c(eps)==&gt; 7 8 *9 3 4 6 =&gt; 记为q3</div><div class="line">	</div><div class="line">- q2	——c——&gt; 7</div><div class="line">	==c(eps)==&gt; 7 8 9 3 4 6 == q3</div><div class="line">	——b——&gt; 5</div><div class="line">	==b(eps)==&gt; 5 8 9 3 4 6 == q2</div><div class="line"></div><div class="line">- q3	——b——&gt; 5</div><div class="line">	==b(eps)==&gt; 5 8 9 3 4 6 == q2</div><div class="line">	——c——&gt; 7</div><div class="line">	==c(eps)==&gt; 7 8 9 3 4 6 == q3</div></pre></td></tr></table></figure></p>
<p><img src="/images/vrhr/20171029211417.png"></p>
<h3 id="算法伪代码"><a href="#算法伪代码" class="headerlink" title="算法伪代码"></a>算法伪代码</h3><p>由上面的基本思想，容易得到以下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">q0 &lt;- eps_closure(n0)</div><div class="line">Q &lt;- &#123;q0&#125;</div><div class="line">workList &lt;- q0</div><div class="line">while (!workList.empty())</div><div class="line">	q &lt;- workList.pop()</div><div class="line">	for each character c	// 256个ASCII码</div><div class="line">		t &lt;- eps_closure(delta(q, c))</div><div class="line">		if (t not in Q)</div><div class="line">			add t to Q</div><div class="line">			add t to workList</div><div class="line">		D[q, c] &lt;- t	// DFA记录此状态转换</div></pre></td></tr></table></figure></p>
<p>eps-闭包的计算：深度优先<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">set closure = &#123;&#125;</div><div class="line"></div><div class="line">void eps_closure(x)</div><div class="line">	closure += &#123;x&#125;</div><div class="line">	for each (y| x --eps--&gt; y)</div><div class="line">		if (!visited(y))</div><div class="line">			eps_closure(y)	// 递归</div></pre></td></tr></table></figure></p>
<p>eps-闭包的计算：宽度优先<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">set closure = &#123;&#125;</div><div class="line">Q = []		// queue</div><div class="line"></div><div class="line">void eps_closure(x)</div><div class="line">	Q = [x]</div><div class="line">	while (!Q.empty())</div><div class="line">		q &lt;- Q.deQueue()</div><div class="line">		closure += q</div><div class="line">		for each (y| q --eps--&gt; y)</div><div class="line">			if (!visited(y))</div><div class="line">				Q.enQueue(y)</div></pre></td></tr></table></figure></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简单笔记&lt;/p&gt;
    
    </summary>
    
      <category term="原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="原理" scheme="http://gaufoo.com/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>手工构造词法分析器</title>
    <link href="http://gaufoo.com/2017/10/26/%E6%89%8B%E5%B7%A5%E6%9E%84%E9%80%A0%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/"/>
    <id>http://gaufoo.com/2017/10/26/手工构造词法分析器/</id>
    <published>2017-10-26T09:36:30.000Z</published>
    <updated>2017-10-30T00:45:51.190Z</updated>
    
    <content type="html"><![CDATA[<p>简单笔记</p>
<a id="more"></a>
<hr>
<h2 id="记号数据结构"><a href="#记号数据结构" class="headerlink" title="记号数据结构"></a>记号数据结构</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Token的数据结构</span></div><div class="line"><span class="comment">// 将字符流转化成Token流</span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> kind &#123;IF, LPAREN, ID, INTLIT, ...&#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">token</span> &#123;</span></div><div class="line">	<span class="keyword">enum</span> kind k;</div><div class="line">	<span class="keyword">char</span> lexeme[]; <span class="comment">// 单词</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>例：</p>
<blockquote>
<p>“if (x &gt; 5)”</p>
</blockquote>
<p>=&gt;<br>token {k = IF, lexeme = NULL};<br>// IF 和 “if” 一一对应，没必要记录单词<br>token {k = LPAREN, lexeme = NULL};<br>token {k = ID, lexeme = “x”};<br>…</p>
<hr>
<h2 id="转移图法"><a href="#转移图法" class="headerlink" title="转移图法"></a>转移图法</h2><h3 id="识别比较符"><a href="#识别比较符" class="headerlink" title="识别比较符"></a>识别比较符</h3><h4 id="转移图"><a href="#转移图" class="headerlink" title="转移图"></a>转移图</h4><p><img src="/images/cffx/20171026163706.png"></p>
<h4 id="算法伪代码"><a href="#算法伪代码" class="headerlink" title="算法伪代码"></a>算法伪代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">// 上图的转换算法</div><div class="line"></div><div class="line">token nextToken()</div><div class="line">&#123;</div><div class="line">	c = getChar();</div><div class="line">	switch (c)</div><div class="line">	&#123;</div><div class="line">		case &apos;&lt;&apos;:</div><div class="line">			c = getChar();</div><div class="line">			switch(c)</div><div class="line">			&#123;</div><div class="line">				case &apos;=&apos;: return LE;</div><div class="line">				case &apos;&gt;&apos;: return NE;</div><div class="line">				default: rollback(); return LT;</div><div class="line">			&#125;</div><div class="line">		case &apos;=&apos;: return EQ;</div><div class="line">		case &apos;&gt;&apos;:</div><div class="line">			c = getChar();</div><div class="line">			switch(c)</div><div class="line">			&#123;</div><div class="line">				case &apos;=&apos;: return GE;</div><div class="line">				default: rollback(); return GT;</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h3 id="识别标识符"><a href="#识别标识符" class="headerlink" title="识别标识符"></a>识别标识符</h3><h4 id="转移图-1"><a href="#转移图-1" class="headerlink" title="转移图"></a>转移图</h4><p><img src="/images/cffx/20171026165653.png"></p>
<h4 id="算法伪代码-1"><a href="#算法伪代码-1" class="headerlink" title="算法伪代码"></a>算法伪代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">token nextToken()</div><div class="line">&#123;</div><div class="line">	c = getChar();</div><div class="line">	switch (c)</div><div class="line">	&#123;</div><div class="line">	/*</div><div class="line">	...</div><div class="line">	...</div><div class="line">	...</div><div class="line">	*/</div><div class="line">	case &apos;a&apos;, ..., &apos;z&apos;, &apos;A&apos;, ..., &apos;Z&apos;, &apos;_&apos;:</div><div class="line">		c = getChar();</div><div class="line">		while (c == &apos;a&apos; || ... || c == &apos;z&apos; </div><div class="line">			|| c == &apos;A&apos; || ... || c == &apos;Z&apos;</div><div class="line">			|| c == &apos;0&apos; || ... || c == &apos;9&apos;</div><div class="line">			|| c == &apos;_&apos;)</div><div class="line">			c = getChar();</div><div class="line">		rollback();</div><div class="line">		return ID;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h4 id="识别IF"><a href="#识别IF" class="headerlink" title="识别IF"></a>识别IF</h4><p>在识别标识符的基础上，进一步实现识别特定的关键字。</p>
<h5 id="转移图-2"><a href="#转移图-2" class="headerlink" title="转移图"></a>转移图</h5><p><img src="/images/cffx/2017102617.png"></p>
<h5 id="算法伪代码-2"><a href="#算法伪代码-2" class="headerlink" title="算法伪代码"></a>算法伪代码</h5><p>代码太长太麻烦，我不想写。<br>如果对所有关键字都要写这样特定的代码，工作量显然是相当巨大的，于是便有了关键字表算法。</p>
<h4 id="关键字表算法"><a href="#关键字表算法" class="headerlink" title="关键字表算法"></a>关键字表算法</h4><ul>
<li>对所有关键字构造哈希表H</li>
<li>先统一按标识符的转移图来识别标识符</li>
<li>识别完成后，进一步查表H是否为关键字<br>通过合理的构造哈希表H（完美哈希），可以在O(1)时间完成。</li>
</ul>
<hr>
<h2 id="课后作业"><a href="#课后作业" class="headerlink" title="课后作业"></a>课后作业</h2><blockquote>
<p>在这部分中，你将使用图转移算法手工实现一个小型的词法分析器。</p>
<ul>
<li>分析器的输入：存储在文本文件中的字符序列，字符取自ASCII字符集。文件中可能包括四种记号：关键字if、符合C语言标准的标识符、空格符、回车符\n。</li>
<li>分析器的输出：打印出所识别的标识符的种类、及行号、列号信息。</li>
</ul>
<p>【示例】对于下面的文本文件：<br>ifx if iif       if<br>iff     if<br>你的输出应该是：<br>ID(ifx) (1, 1)<br>IF        (1, 4)<br>ID(iif)  (1, 8)<br>IF       (1, 13)<br>ID(iff) (2, 1)<br>IF       (2, 8)</p>
</blockquote>
<p>我的代码（很恶心，但是不想改了）：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line">  <span class="keyword">public</span>:</div><div class="line">    Token(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s, <span class="keyword">int</span> row, <span class="built_in">string</span>::size_type loc) : s(s), row(row), col(loc - s.size() + <span class="number">1</span>) &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">const</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">        <span class="built_in">string</span> str;</div><div class="line">        <span class="keyword">if</span> (s != <span class="string">"if"</span>)</div><div class="line">            str = <span class="string">"ID("</span> + s + <span class="string">")"</span>;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            str = <span class="string">"IF"</span>;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; setw(<span class="number">10</span>) &lt;&lt; left &lt;&lt; str &lt;&lt; <span class="string">"\t("</span> &lt;&lt; row &lt;&lt; <span class="string">", "</span> &lt;&lt; col &lt;&lt; <span class="string">')'</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span>:</div><div class="line">    <span class="built_in">string</span> s;</div><div class="line">    <span class="keyword">int</span> row;</div><div class="line">    <span class="built_in">string</span>::size_type col;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="built_in">string</span> line;</div><div class="line">    <span class="keyword">int</span> cnt_line = <span class="number">0</span>;</div><div class="line">    <span class="built_in">vector</span>&lt;Token&gt; tokens;</div><div class="line">    <span class="keyword">while</span> (getline(<span class="built_in">cin</span>, line))</div><div class="line">    &#123;</div><div class="line">        ++cnt_line;</div><div class="line">        <span class="built_in">string</span>::iterator cur = line.begin(), end = line.end();</div><div class="line">        <span class="keyword">while</span> (cur != end)</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">string</span> id;</div><div class="line">            <span class="keyword">if</span> (<span class="built_in">isalpha</span>(*cur) || *cur == <span class="string">'_'</span>)</div><div class="line">            &#123;</div><div class="line">                id += *cur++;</div><div class="line">                <span class="keyword">while</span> (<span class="built_in">isalnum</span>(*cur) || *cur == <span class="string">'_'</span>)</div><div class="line">                    id += *cur++;</div><div class="line">            &#125;</div><div class="line">            tokens.push_back(Token(id, cnt_line, cur - line.begin()));</div><div class="line">            <span class="keyword">while</span> (<span class="built_in">isspace</span>(*cur))</div><div class="line">                ++cur;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Token&gt;::iterator i = tokens.begin(); i != tokens.end(); ++i)</div><div class="line">        (*i).print();</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出效果：<br><img src="/images/cffx/20171030084516.png"></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简单笔记&lt;/p&gt;
    
    </summary>
    
      <category term="原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="原理" scheme="http://gaufoo.com/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>C++中三种实现可变参数的方法</title>
    <link href="http://gaufoo.com/2017/10/24/Cpp%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/"/>
    <id>http://gaufoo.com/2017/10/24/Cpp可变参数/</id>
    <published>2017-10-24T12:20:56.000Z</published>
    <updated>2017-10-24T17:23:09.506Z</updated>
    
    <content type="html"><![CDATA[<p>我真的只是想写一个log函数而已。</p>
<a id="more"></a>
<hr>
<h2 id="可变参数宏（C实现）"><a href="#可变参数宏（C实现）" class="headerlink" title="可变参数宏（C实现）"></a>可变参数宏（C实现）</h2><p>利用头文件<code>stdarg.h</code>中的宏定义：<code>va_list</code>、<code>va_start(va_list, arg)</code>、<code>va_arg(va_list, type)</code>、<code>va_end(va_list)</code>。可以实现可变参数且参数类型不同的函数。</p>
<p>过程：</p>
<ul>
<li>函数声明中，可变参数用省略号表示。</li>
<li>创建<code>va_list</code>变量，通过<code>va_start</code>访问参数列表并承接第一个参数。</li>
<li>使用<code>va_arg</code>继续获取参数的值。</li>
<li>使用<code>va_end</code>完成清理工作。</li>
</ul>
<p>以可变参数版本的sum作为例子：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdarg.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> count, ...)</span> <span class="comment">//count 表示可变参数个数</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    va_list ap;          <span class="comment">//声明一个va_list变量</span></div><div class="line">    va_start(ap, count); <span class="comment">//初始化，第二个参数为最后一个确定的形参（不能另开局部变量）</span></div><div class="line"></div><div class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)</div><div class="line">        sum += va_arg(ap, <span class="keyword">int</span>); <span class="comment">//读取可变参数，第二个参数为可变参数的类型</span></div><div class="line"></div><div class="line">    va_end(ap); <span class="comment">//清理工作</span></div><div class="line">    <span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum(<span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>局限性：</p>
<blockquote>
<ul>
<li>可变参数宏只能实现<strong>顺序访问</strong>可变参数，无法后退访问。但可以重复使用<code>va_start</code>来初始化<code>va_list</code>变量。</li>
<li>运行时，函数必须能够根据已有信息（既有约定，或确定实参）确定可变参数的具体个数与类型：函数定义需要知道可变参数的具体类型、个数，这些信息是在运行时确定的，那么显然应该由实参来确定。在上面的例子中count传递了可变参数的个数，而参数类型则是既有约定（整型）； </li>
<li>该方法是<strong>极不安全</strong>的，宏本身无法提供任何安全性保证，他总是按照既定代码“自作多情”的认为实参就应该是那么多，即使实参并不是那么多。这就要求所有安全性必须由程序员来保证。例如，在以上的示例代码中，如果调用时指定count为10，但实际上只给出9个可变形参，那么函数还是会读取10个参数，显然第十次读取是多余的，多余的操作一般不会有什么好结果，当然如果实参过多，多余的实参也不会被读取而是被忽略。</li>
</ul>
</blockquote>
<hr>
<h2 id="initializer-list标准库类型（C-11）"><a href="#initializer-list标准库类型（C-11）" class="headerlink" title="initializer_list标准库类型（C++11）"></a>initializer_list标准库类型（C++11）</h2><p>过程：</p>
<ul>
<li>函数声明中使用<code>initializer_list</code>模板代表可变参数列表</li>
<li>使用迭代器访问<code>initializer_list</code>中的参数</li>
<li>传入参数时需要使用<code>{}</code>把多个参数括起来</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;initializer_list&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">initializer_list</span>&lt;<span class="keyword">int</span>&gt; il)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> p : il)   <span class="comment">// 使用范围for</span></div><div class="line">        sum += p;</div><div class="line">    <span class="comment">// for (auto p = il.begin(); p != il.end(); p++) //使用迭代器访问参数</span></div><div class="line">    <span class="comment">//     sum += *p;</span></div><div class="line">    <span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; sum(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>局限性：</p>
<ul>
<li>可变参数类型必须<strong>一致</strong></li>
</ul>
<hr>
<h2 id="可变参数模板（C-11）"><a href="#可变参数模板（C-11）" class="headerlink" title="可变参数模板（C++11）"></a>可变参数模板（C++11）</h2><p>更方便安全有效地实现可变参数且参数类型不同的函数。</p>
<p>过程：</p>
<ul>
<li>编写含有模板参数包和函数参数包的模板函数</li>
<li>函数定义<strong>递归</strong>调用自己</li>
<li>利用函数重载（参数包含有零个参数）来处理<strong>边界情况</strong>，编写处理边界情况的模板</li>
</ul>
<p>C++ primer 第五版中的例子：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 用来终止递归并打印最后一个元素的函数</span></div><div class="line"><span class="comment">// 此函数必须在可变参数版本的print定义之前声明（否则将出现neither visible nor found by argument-dependent lookup错误）</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="built_in">std</span>::<span class="function">ostream &amp;<span class="title">print</span><span class="params">(<span class="built_in">std</span>::ostream &amp;os, <span class="keyword">const</span> T &amp;t)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> os &lt;&lt; t;                <span class="comment">// 包中最后一个元素</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//包中除最后一个元素之外的其他元素都会调用这个版本的pirnt</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><span class="built_in">std</span>::<span class="function">ostream &amp;<span class="title">print</span><span class="params">(<span class="built_in">std</span>::ostream &amp;os, <span class="keyword">const</span> T &amp;t, cosnt Args &amp;... rest)</span></span>&#123;</div><div class="line">    os &lt;&lt; t &lt;&lt; <span class="string">","</span>;               <span class="comment">// 打印第一个实参，包中元素减一</span></div><div class="line">    <span class="keyword">return</span> print(os, rest...);    <span class="comment">// 递归调用，打印剩余实参</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>局限性：</p>
<ul>
<li>由于只能递归实现，导致需要定义重载函数来处理边界情况，代码不够清晰自然。</li>
<li>模板会为每一个不同的实例生成代码，函数的实例过多可能会使代码体积庞大。</li>
<li>依靠递归使得功能具有局限性，并且效率也会受到影响。</li>
</ul>
<hr>
<h2 id="log函数实现"><a href="#log函数实现" class="headerlink" title="log函数实现"></a>log函数实现</h2><p>头文件：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* log.h */</span></div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LOG_H_</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LOG_H_</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="built_in">std</span>::<span class="function">ostream &amp;<span class="title">log</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; &#125;</div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><span class="built_in">std</span>::<span class="function">ostream &amp;<span class="title">log</span><span class="params">(T <span class="keyword">const</span> &amp;p, Args <span class="keyword">const</span> &amp;... rest)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; p;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">log</span>(rest...);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure></p>
<p>测试代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* test.cpp */</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"log.h"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="keyword">int</span> n = <span class="number">2</span>;</div><div class="line">    <span class="built_in">log</span>(n, <span class="string">" hello "</span>, <span class="number">10086</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// std::cout &lt;&lt; "2 hello 10086" &lt;&lt; std::endl;</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我真的只是想写一个log函数而已。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C++" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/C/"/>
    
    
      <category term="编程" scheme="http://gaufoo.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C++" scheme="http://gaufoo.com/tags/C/"/>
    
      <category term="C" scheme="http://gaufoo.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>C++11类型说明符：constexpr</title>
    <link href="http://gaufoo.com/2017/10/24/CppConstexpr/"/>
    <id>http://gaufoo.com/2017/10/24/CppConstexpr/</id>
    <published>2017-10-24T08:00:59.000Z</published>
    <updated>2017-10-24T11:39:43.821Z</updated>
    
    <content type="html"><![CDATA[<p>关键字<code>constexpr</code>用于修饰常量表达式（const express），具体说明如下</p>
<a id="more"></a>
<hr>
<h2 id="字面值常量（literal）"><a href="#字面值常量（literal）" class="headerlink" title="字面值常量（literal）"></a>字面值常量（literal）</h2><ul>
<li>由形式和值来决定数据类型</li>
<li>可手动指定类型<br>如：<ul>
<li>常规<br>20 <em>—— 十进制数</em><br>0x8 <em>—— 十六进制数</em><br>“hello” <em>—— char[6]</em></li>
<li>指定类型<br>3F <em>—— float</em><br>L’a’ <em>—— whar_t</em><br>u8”hi!” <em>—— utf-8</em><br>3.14159 <em>—— long double</em></li>
</ul>
</li>
</ul>
<hr>
<h2 id="常量表达式（const-express）"><a href="#常量表达式（const-express）" class="headerlink" title="常量表达式（const express）"></a>常量表达式（const express）</h2><blockquote>
<p>The constexpr specifier declares that it is possible to evaluate the value of the function or variable at compile time. Such variables and functions can then be used where only compile time constant expressions are allowed (provided that appropriate function arguments are given). A <code>constexpr</code> specifier used in an <code>object</code> declaration implies <code>const</code>. A <code>constexpr</code> specifier used in a <code>function</code> or static member variable (since C++17) declaration implies <code>inline</code>.</p>
</blockquote>
<p>其中<code>literal</code>就是<code>const express</code>的一种。从文档可知，<code>const express</code>主要性质是可以在编译期间得到值。同时，<code>constexpr</code>修饰的对象自动获得<strong>常量</strong>属性，<code>constexpr</code>修饰的函数自动获得<strong>内联</strong>属性。</p>
<hr>
<h3 id="constexpr变量"><a href="#constexpr变量" class="headerlink" title="constexpr变量"></a>constexpr变量</h3><p>满足以下条件：</p>
<ul>
<li>其值必须为<code>literal</code>类型。</li>
<li>必须能立即初始化，意味着所有的初始化方法，包括所有隐式转换、调用构造函数等，都必须为<code>const express</code>。</li>
</ul>
<p>特别需要说明的是指针变量，<code>constexpr</code>类型的指针变量有以下的几种存在方式：</p>
<ul>
<li><p>指向nullptr</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> *p = <span class="literal">nullptr</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>指向全局变量、static变量，因其地址不会改变</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> i = <span class="number">0</span>;	<span class="comment">// i 定义在函数外部，是一个全局变量</span></div><div class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> *p = &amp;i;	<span class="comment">// 正确</span></div></pre></td></tr></table></figure>
</li>
<li><p>另外：<br>虽然<code>constexpr</code>和<code>const</code>在某些方面有点相似，但<code>constexpr int *q = nullptr;</code>的含义却与<code>const int *q = nullptr;</code>的有些出入，前者<code>q</code>不能修改，后者<code>*q</code>不能修改。若需要指向常量的常量指针，可以这样定义：<code>constexpr const int *q = nullptr;</code>，这样<code>q</code>和<code>*q</code>就都是不可修改的常量了。</p>
</li>
</ul>
<hr>
<h3 id="constexpr函数"><a href="#constexpr函数" class="headerlink" title="constexpr函数"></a>constexpr函数</h3><p><code>constexpr</code>函数会被隐式地<code>inline</code>。<br>满足以下条件：</p>
<ul>
<li>形参和返回值都得为<code>literal</code>类型</li>
<li>只能有一条<code>return</code>语句</li>
</ul>
<p>例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">int</span> <span class="title">new_sz</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">42</span>;&#125;</div><div class="line"><span class="function">cosntexpr size_t <span class="title">scale</span><span class="params">(<span class="keyword">size_t</span> cnt)</span> </span>&#123;<span class="keyword">return</span> new_sz() * cnt;&#125;</div><div class="line"><span class="keyword">int</span> arr[scale(<span class="number">2</span>)];	<span class="comment">// 正确，scale(2)是const express</span></div><div class="line"><span class="keyword">int</span> n = <span class="number">2</span>;</div><div class="line"><span class="keyword">int</span> arr2[scale(n)];	<span class="comment">// 错误，scale(n)不是const express</span></div></pre></td></tr></table></figure></p>
<hr>
<h3 id="constexpr类"><a href="#constexpr类" class="headerlink" title="constexpr类"></a>constexpr类</h3><p>满足以下条件：</p>
<ul>
<li>该类是聚合类，所谓聚合类：<ul>
<li>所有成员都是public</li>
<li>无显式定义的构造函数</li>
<li>成员无初始值</li>
<li>无基类，无virtual函数</li>
</ul>
</li>
<li>若不是聚合类，需要满足<ul>
<li>数据成员必须都为<code>literal</code>类型（函数成员无须是）</li>
<li>至少含有一个<code>constexpr</code>构造函数</li>
<li>只能使用默认的析构函数</li>
</ul>
</li>
</ul>
<p>例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Debug</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line">  <span class="keyword">public</span>:</div><div class="line">    constexpr Debug(bool b = true) : hw(b), io(b), other(b) &#123;&#125;</div><div class="line">    constexpr Debug(bool h, bool i, bool o) : hw(h), io(i), other(o) &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="keyword">bool</span> <span class="title">any</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> hw || io || other; &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_io</span><span class="params">(<span class="keyword">bool</span> b)</span> </span>&#123; io = b; &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_hw</span><span class="params">(<span class="keyword">bool</span> b)</span> </span>&#123; hw = b; &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_other</span><span class="params">(<span class="keyword">bool</span> b)</span> </span>&#123; other = b; &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span>:</div><div class="line">    <span class="keyword">bool</span> hw;</div><div class="line">    <span class="keyword">bool</span> io;</div><div class="line">    <span class="keyword">bool</span> other;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">constexpr</span> Debug <span class="title">io_sub</span><span class="params">(<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>)</span></span>;</div><div class="line">    <span class="keyword">if</span> (io_sub.any())</div><div class="line">        <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"print appropriate error messages"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关键字&lt;code&gt;constexpr&lt;/code&gt;用于修饰常量表达式（const express），具体说明如下&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C++" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/C/"/>
    
    
      <category term="编程" scheme="http://gaufoo.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C++" scheme="http://gaufoo.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>编译原理学习笔记（二）</title>
    <link href="http://gaufoo.com/2017/09/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://gaufoo.com/2017/09/16/编译原理学习笔记（二）/</id>
    <published>2017-09-16T09:46:00.000Z</published>
    <updated>2017-10-27T01:53:29.778Z</updated>
    
    <content type="html"><![CDATA[<p>记录</p>
<a id="more"></a>
<hr>
<h2 id="正则表达式-Regular-Expression，RE"><a href="#正则表达式-Regular-Expression，RE" class="headerlink" title="正则表达式 ( Regular Expression，RE )"></a>正则表达式 ( Regular Expression，RE )</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul>
<li>是一种用来描述正则语言的更紧凑的表示方法。</li>
<li>正则表达式可以由较小的正则表达式按照特定规则<strong>递归</strong>地构建。</li>
<li>每个正则表达式 <strong>r</strong> 定义(表示)一个语言，记为 <strong>L(r)</strong> 。</li>
</ul>
<hr>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li>ε是一个RE，L(ε) = {ε}</li>
<li>如果 a∈∑，则a是一个RE，L(a) = {a}</li>
<li>假设 <strong>r</strong> 和 <strong>s</strong> 都是RE，表示的语言分别是 <strong>L(r)</strong> 和 <strong>L(s)</strong> ，则<ul>
<li>r|s 是一个RE，L( r|s ) = L(r)∪L(s)</li>
<li>rs 是一个RE，L( rs ) = L(r) L(s)</li>
<li>r* 是一个RE，L( r* )= (L(r))*</li>
<li>(r) 是一个RE，L( (r) ) = L(r)</li>
</ul>
</li>
</ul>
<hr>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p>C语言无符号整数的RE</p>
<ul>
<li>十进制整数的RE - (1|…|9)(0|…|9)*|0</li>
<li>八进制整数的RE - 0(0|1|2|3|4|5|6|7)(0|1|2|3|4|5|6|7)*</li>
<li>十六进制整数的RE - 0x(0|1|…|9|a|…| f |A|…|F)(0|…|9|a|…| f |A|…|F )*</li>
</ul>
<hr>
<h3 id="代数定律"><a href="#代数定律" class="headerlink" title="代数定律"></a>代数定律</h3><table>
<thead>
<tr>
<th>定律</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r｜s = s｜r</td>
<td>｜是可以交换的</td>
</tr>
<tr>
<td>r｜( s｜t )=( r｜s )｜t</td>
<td>｜是可结合的</td>
</tr>
<tr>
<td>r(s t)=( r s)t</td>
<td>连接是可结合的</td>
</tr>
<tr>
<td>r ( s｜t )= r s｜r t ; &nbsp;&nbsp;&nbsp; ( s｜t ) r = sr｜t r</td>
<td>连接对｜是可分配的</td>
</tr>
<tr>
<td>εr = rε = r</td>
<td>ε 是连接的单位元</td>
</tr>
<tr>
<td>r* = ( r｜ε )*</td>
<td>闭包中一定包含 ε</td>
</tr>
<tr>
<td>r* * = r*</td>
<td>* 具有幂等性</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="单词的识别"><a href="#单词的识别" class="headerlink" title="单词的识别"></a>单词的识别</h2><h3 id="有穷自动机-Finite-Automata，FA"><a href="#有穷自动机-Finite-Automata，FA" class="headerlink" title="有穷自动机 ( Finite Automata，FA )"></a>有穷自动机 ( Finite Automata，FA )</h3><ul>
<li>具有一系列<strong>离散的输入输出信息</strong>和<strong>有穷数目的内部状态</strong>。</li>
<li>系统只需要根据<strong>当前所处的状态</strong>和<strong>当前面临的输入信息</strong>就可以决定系统的<strong>后继行为</strong>。</li>
<li>每当系统处理了当前的输入后，系统的内部状态也将<strong>发生改变</strong>。</li>
</ul>
<h4 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h4><p><img src="/images/20170916182343.jpg" width="500"></p>
<ul>
<li>输入带(input tape)：用来存放输入符号串。</li>
<li>读头(head )：从左向右逐个读取输入符号，不能修改（只读）、不能往返移动。</li>
<li>有穷控制器( finite control )：具有有穷个状态数，根据<strong>当前的状态</strong>和<strong>当前输入符号</strong>控制转入<strong>下一状态</strong>。</li>
</ul>
<h4 id="表示：转换图-Transition-Graph"><a href="#表示：转换图-Transition-Graph" class="headerlink" title="表示：转换图 ( Transition Graph )"></a>表示：转换图 ( Transition Graph )</h4><p><img src="/images/20170916183203.jpg" width="500"></p>
<ul>
<li>结点：FA的状态<ul>
<li>初始状态（开始状态）：<strong>只有一个</strong>，由start箭头指向。</li>
<li>终止状态（接收状态）：可以有多个，用<strong>双圈</strong>表示。</li>
</ul>
</li>
<li>带标记的有向边：如果对于输入 <strong>a</strong> ，存在一个从状态 <strong>p</strong> 到状态 <strong>q</strong> 的转换，就在 <strong>p</strong> 、 <strong>q</strong> 之间画一条有向边，并标记上 <strong>a</strong> 。</li>
</ul>
<h4 id="接收的语言"><a href="#接收的语言" class="headerlink" title="接收的语言"></a>接收的语言</h4><ul>
<li>给定输入串 <strong>x</strong> ，如果存在一个对应于串 <strong>x</strong> 的从初始状态到某个终止状态的转换序列，则称串 <strong>x</strong> 被该FA接收。</li>
<li>由一个有穷自动机M接收的所有串构成的集合称为是该<strong>FA定义（或接收）的语言</strong>，记为 <strong>L( M )</strong>。</li>
</ul>
<p><img src="/images/20170916183203.jpg" width="500"></p>
<blockquote>
<p>L(M) = 所有以abb结尾的字母表{a, b}上的串的集合</p>
</blockquote>
<h4 id="最长子串匹配原则"><a href="#最长子串匹配原则" class="headerlink" title="最长子串匹配原则"></a>最长子串匹配原则</h4><p>当输入串的多个前缀与一个或多个模式匹配时，总是选择最长的前缀进行匹配。</p>
<hr>
<h3 id="有穷自动机的分类"><a href="#有穷自动机的分类" class="headerlink" title="有穷自动机的分类"></a>有穷自动机的分类</h3><ul>
<li>确定的FA (Deterministic finite automata, DFA)</li>
<li>非确定的FA (Nondeterministic finite automata, NFA)</li>
</ul>
<h4 id="DFA"><a href="#DFA" class="headerlink" title="DFA"></a>DFA</h4><p>对任意的字符，最多有一个状态可以转移。</p>
<p><strong>M = ( S，Σ ，δ，s0，F )</strong></p>
<ul>
<li>S：有穷状态集。</li>
<li>Σ：输入字母表，即输入符号集合。假设 <strong>ε</strong> 不是 Σ 中的元素。</li>
<li>δ：将S×Σ映射到S的<strong>转换函数</strong>。∀s∈S, a∈Σ, <strong>δ(s,a)</strong> 表示从状态s出发，沿着标记为a的边所能到达的状态。</li>
<li>s0：开始状态 (或初始状态)，s0∈ S。</li>
<li>F：接收状态（或终止状态）集合，F⊆ S。</li>
</ul>
<p><img src="/images/DFA.png" width="500"></p>
<blockquote>
<p>r = (a|b)*abb</p>
</blockquote>
<hr>
<h4 id="NFA"><a href="#NFA" class="headerlink" title="NFA"></a>NFA</h4><p>对任意的字符，有多于一个状态可以转移。</p>
<p><strong>M = ( S，Σ ，δ，s0，F )</strong></p>
<ul>
<li>S：有穷状态集。</li>
<li>Σ：输入字母表，即输入字母表。假设 <strong>ε</strong> 不是 Σ 中的元素。</li>
<li>δ：将S×Σ映射到2^S的<strong>转换函数</strong>。s∈S, a∈Σ, <strong>δ(s,a)</strong>表示从状态s出发，沿着标记为a的边所能到达的状态集合。</li>
<li>s0：开始状态 (或初始状态)，s0∈ S。</li>
<li>F：接收状态（或终止状态）集合，F⊆ S。</li>
</ul>
<p><img src="/images/NFA.png" width="500"></p>
<blockquote>
<p>r = (a|b)*abb</p>
</blockquote>
<hr>
<h4 id="等价性"><a href="#等价性" class="headerlink" title="等价性"></a>等价性</h4><blockquote>
<p>对任何非确定的有穷自动机N ，存在定义同一语言的确定的有穷自动机D<br>对任何确定的有穷自动机D ，存在定义同一语言的非确定的有穷自动机N</p>
</blockquote>
<hr>
<h4 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h4><ul>
<li>对于DFA，一个特定的符号输入，有且只能得到一个状态，而NFA就有可能得到一个状态集。因此NFA引擎必须记录所有的可能路径。</li>
<li>DFA比较快，但不提供Backtrack（回溯）功能，NFA比较慢，但提供了Backtrack功能。</li>
</ul>
<hr>
<h4 id="DFA的算法实现"><a href="#DFA的算法实现" class="headerlink" title="DFA的算法实现"></a>DFA的算法实现</h4><p>由于DFA对于特定输入，状态是确定的，因此实现起来很方便。</p>
<ul>
<li>输入：以文件结束符<strong>eof</strong>结尾的字符串<strong>x</strong>。DFA <strong>D</strong>的开始状态<strong>s0</strong>，接收状态集<strong>F</strong>，转换函数<strong>move</strong>。</li>
<li>输出：如果<strong>D</strong>接收<strong>x</strong>，则回答“yes”，否则回答“no”。</li>
<li>方法：将下述算法应用于输入串<strong>x</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">s = s0;</div><div class="line">c = next_char();</div><div class="line">while (c != eof) &#123;</div><div class="line">	s = move(s, c);</div><div class="line">	c = next_char();</div><div class="line">&#125;</div><div class="line">if (s is in F)</div><div class="line">	return &quot;yes&quot;;</div><div class="line">else</div><div class="line">	return &quot;no&quot;;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="RE转换成NFA"><a href="#RE转换成NFA" class="headerlink" title="RE转换成NFA"></a>RE转换成NFA</h3><h4 id="ε"><a href="#ε" class="headerlink" title="ε"></a>ε</h4><p><img src="/images/20171024144829.png" width="400"></p>
<h4 id="字母表Σ中符号a"><a href="#字母表Σ中符号a" class="headerlink" title="字母表Σ中符号a"></a>字母表Σ中符号a</h4><p><img src="/images/20171024144915.png" width="400"></p>
<h4 id="r-r1r2"><a href="#r-r1r2" class="headerlink" title="r = r1r2"></a>r = r1r2</h4><p><img src="/images/20171024145410.png" width="500"></p>
<h4 id="r-r1-r2"><a href="#r-r1-r2" class="headerlink" title="r = r1|r2"></a>r = r1|r2</h4><p><img src="/images/20171024145504.png" width="400"></p>
<h4 id="r-r1"><a href="#r-r1" class="headerlink" title="r = (r1)*"></a>r = (r1)*</h4><p><img src="/images/20171024145520.png" width="200"></p>
<hr>
<blockquote>
<p>r=(a|b)*abb 对应的NFA</p>
</blockquote>
<p><img src="/images/20171024150046.png" width="500"></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录&lt;/p&gt;
    
    </summary>
    
      <category term="原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="原理" scheme="http://gaufoo.com/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>编译原理学习笔记（一）</title>
    <link href="http://gaufoo.com/2017/09/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://gaufoo.com/2017/09/10/编译原理学习笔记（一）/</id>
    <published>2017-09-09T17:52:49.000Z</published>
    <updated>2017-09-16T10:05:05.373Z</updated>
    
    <content type="html"><![CDATA[<p>记录</p>
<a id="more"></a>
<hr>
<h2 id="文法的形式化定义"><a href="#文法的形式化定义" class="headerlink" title="文法的形式化定义"></a>文法的形式化定义</h2><p><strong>G = (V<sub>T</sub>, V<sub>N</sub>, P , S )</strong></p>
<h3 id="各成分含义"><a href="#各成分含义" class="headerlink" title="各成分含义"></a>各成分含义</h3><ul>
<li>V<sub>T</sub>：终结符集合<ul>
<li>终结符（terminal symbol）是文法所定义的语言的<strong>基本符号</strong>，有时也称为token</li>
<li>例：V<sub>T</sub> = { apple, boy, eat, little }</li>
</ul>
</li>
<li><p>V<sub>N</sub>：非终结符集合</p>
<ul>
<li>非终结符 ( nonterminal ) 是用来表示<strong>语法成分</strong>的符号，有时也称为“语法变量”</li>
<li><p>例: V<sub>N</sub> = { &lt;句子&gt;, &lt;名词短语&gt;, &lt;动词短语&gt;, &lt;名词&gt;, … }</p>
<blockquote>
<p>V<sub>T</sub> ∩ V<sub>N</sub> = Φ<br>V<sub>T</sub> ∪ V<sub>N</sub> = 文法符号集</p>
</blockquote>
</li>
</ul>
</li>
<li><p>P：产生式集合</p>
<ul>
<li>产生式 ( production ) 描述了将终结符和非终结符组合成串的方法</li>
<li>产生式的一般形式： <strong>α→β</strong> ，读作：α定义为β<ul>
<li>α∈(V<sub>T</sub> ∪ V<sub>N</sub> )<sup>+</sup>，且α中至少包含V<sub>N</sub>中的一个元素：称为产生式的头 ( head ) 或左部 ( left side )</li>
<li>β∈(V<sub>T</sub> ∪ V<sub>N</sub> )<sup>*</sup>：称为产生式的体(body)或右部(right side)</li>
</ul>
</li>
<li>例：{&lt;句子&gt;→&lt;名词短语&gt;&lt;动词短语&gt;,&lt;名词短语&gt;→&lt;形容词&gt;&lt;名词短语&gt;,……}</li>
</ul>
</li>
<li>S：开始符号<ul>
<li>S∈V<sub>N</sub> 。开始符号 ( start symbol ) 表示的是该文法中<strong>最大</strong>的语法成分</li>
<li>例：S = &lt;句子&gt;</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>例子：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">G = (&#123;id, +, *, (, )&#125;, &#123;E&#125;, P, E)</div><div class="line">P = &#123;	E → E + E,</div><div class="line">	E → E * E,</div><div class="line">	E → ( E ),</div><div class="line">	E → id&#125;</div></pre></td></tr></table></figure>
<p>  约定：不引起歧义的前提下，可以只写产生式</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">G : 	E → E + E</div><div class="line">	E → E * E</div><div class="line">	E → ( E )</div><div class="line">	E → id</div></pre></td></tr></table></figure>
<p>  简写：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">G : E → E + E | E * E | ( E ) | id</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="符号约定"><a href="#符号约定" class="headerlink" title="符号约定"></a>符号约定</h3><ul>
<li>终结符<ul>
<li>字母表中排在前面的小写字母，如 a、b、c</li>
<li>运算符，如 +、*等</li>
<li>标点符号，如括号、逗号等</li>
<li>数字 0、1、… 、9</li>
<li>粗体字符串，如<strong>id</strong>、<strong>if</strong>等</li>
</ul>
</li>
<li>非终结符<ul>
<li>字母表中排在前面的大写字母，如A、B、C</li>
<li>字母S。通常表示开始符号</li>
<li>小写、斜体的名字，如 <em>expr</em>、<em>stmt</em>等</li>
<li>代表程序构造的大写字母。如E(表达式)、T(项)和F(因子)</li>
</ul>
</li>
<li>文法符号（即终结符或非终结符）<ul>
<li>字母表中排在后面的大写字母（如X、Y、Z）</li>
</ul>
</li>
<li>终结符号串<ul>
<li>字母表中排在后面的小写字母（主要是u、v、… 、z）</li>
</ul>
</li>
<li>文法符号串<ul>
<li>小写希腊字母，如α、β、γ</li>
</ul>
</li>
<li>除非特别说明，第一个产生式的左部就是开始符号</li>
</ul>
<hr>
<h2 id="语言的定义"><a href="#语言的定义" class="headerlink" title="语言的定义"></a>语言的定义</h2><h3 id="推导和归约"><a href="#推导和归约" class="headerlink" title="推导和归约"></a>推导和归约</h3><p>用产生式的右部替换产生式的左部，称为推导 (Derivations) </p>
<blockquote>
<p>如果α0=&gt;α1，α1=&gt;α2，α2=&gt;α3，…，α n-1=&gt;αn，则可以记作α0=&gt;α1=&gt;α2=&gt;α3=&gt; …=&gt; α n-1=&gt;αn，称符号串 α0经过n步推导出αn，可简记为α0=&gt;<sup>n</sup>αn</p>
</blockquote>
<p>用产生式的左部替换产生式的右部，称为归约 (Reductions)<br>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;句子&gt; =&gt; &lt;名词短语&gt;&lt;动词短语&gt;</div><div class="line">       =&gt; &lt;形容词&gt;&lt;名词短语&gt;&lt;动词短语&gt;</div><div class="line">       =&gt; little &lt;名词短语&gt;&lt;动词短语&gt;</div><div class="line">       =&gt; little &lt;名词&gt;&lt;动词短语&gt;</div><div class="line">       =&gt; little boy &lt;动词短语&gt;</div><div class="line">       =&gt; little boy &lt;动词&gt;&lt;名词短语&gt;</div><div class="line">       =&gt; little boy eats &lt;名词短语&gt;</div><div class="line">       =&gt; little boy eats &lt;名词&gt;</div><div class="line">       =&gt; little boy eats apple</div></pre></td></tr></table></figure></p>
<p>由上往下是推导，由下往上是归约</p>
<hr>
<h3 id="句型和句子"><a href="#句型和句子" class="headerlink" title="句型和句子"></a>句型和句子</h3><ul>
<li>如果 S=&gt;*α, α∈(V<sub>T</sub>∪V<sub>N</sub>)*，则称α是G的一个句型(sentential form)</li>
<li>如果 S=&gt;*w，w∈V<sub>T</sub>*，则称w是G的一个句子(sentence)</li>
</ul>
<blockquote>
<p>句子是不包含<strong>非终结符</strong>的句型</p>
</blockquote>
<ul>
<li>由文法G的开始符号S推导出的所有<strong>句子</strong>构成的集合称为文法G生成的<strong>语言</strong>，记为L(G)。</li>
</ul>
<hr>
<h2 id="Chomsky-文法分类体系"><a href="#Chomsky-文法分类体系" class="headerlink" title="Chomsky 文法分类体系"></a>Chomsky 文法分类体系</h2><h3 id="0型文法-Type-0-Grammar"><a href="#0型文法-Type-0-Grammar" class="headerlink" title="0型文法 (Type-0 Grammar)"></a>0型文法 (Type-0 Grammar)</h3><ul>
<li>无限制文法(Unrestricted Grammar) / 短语结构文法(Phrase Structure Grammar, PSG )<ul>
<li>∀α → β∈P， α中至少包含1个非终结符</li>
</ul>
</li>
</ul>
<blockquote>
<p>PSG中可包含ε-产生式</p>
</blockquote>
<hr>
<h3 id="1型文法-Type-1-Grammar"><a href="#1型文法-Type-1-Grammar" class="headerlink" title="1型文法 (Type-1 Grammar)"></a>1型文法 (Type-1 Grammar)</h3><ul>
<li>上下文有关文法(Context-Sensitive Grammar , CSG )<ul>
<li>∀α → β∈P，｜α｜≤｜β｜</li>
<li>产生式的一般形式： α1Aα2 → α1βα2 ( β≠ε )</li>
</ul>
</li>
</ul>
<blockquote>
<p>CSG中不包含ε-产生式</p>
</blockquote>
<hr>
<h3 id="2型文法-Type-2-Grammar"><a href="#2型文法-Type-2-Grammar" class="headerlink" title="2型文法 (Type-2 Grammar)"></a>2型文法 (Type-2 Grammar)</h3><ul>
<li>上下文无关文法 (Context-Free Grammar, CFG )<ul>
<li>∀α → β∈P，α ∈ V<sub>N</sub></li>
<li>产生式的一般形式：A→β</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3型文法-Type-3-Grammar"><a href="#3型文法-Type-3-Grammar" class="headerlink" title="3型文法 (Type-3 Grammar)"></a>3型文法 (Type-3 Grammar)</h3><ul>
<li>正则文法 (Regular Grammar, RG )<ul>
<li>右线性(Right Linear)文法： A→wB 或 A→w</li>
<li>左线性(Left Linear) 文法： A→Bw 或 A→w</li>
</ul>
</li>
</ul>
<hr>
<h3 id="四种文法之间的关系"><a href="#四种文法之间的关系" class="headerlink" title="四种文法之间的关系"></a>四种文法之间的关系</h3><p>逐级限制：</p>
<ul>
<li>0型文法：α中至少包含1个非终结符</li>
<li>1型文法（CSG） ：｜α｜≤｜β｜</li>
<li>2型文法（CFG） ：α ∈ V<sub>N</sub></li>
<li>3型文法（RG）：A→wB 或 A→w (A→Bw 或A→w)</li>
</ul>
<hr>
<h2 id="CFG的分析树"><a href="#CFG的分析树" class="headerlink" title="CFG的分析树"></a>CFG的分析树</h2><h3 id="分析树举例"><a href="#分析树举例" class="headerlink" title="分析树举例"></a>分析树举例</h3><p><img src="/images/229534388000563683.jpg" width="500"></p>
<ul>
<li>分析树是推导的图形化表示<br>  推导过程：E =&gt; -E =&gt; - ( E ) =&gt; - ( E+E ) =&gt; - ( id+E ) =&gt; - ( id+id )</li>
<li>结构<ul>
<li><strong>根节点</strong>的标号为<strong>文法开始符号</strong></li>
<li><strong>内部结点</strong>表示对一个产生式A→β的应用，该结点的标号是此产生式左部<strong>A</strong>。该结点的子结点的标号从左到右构成了产生式的右部<strong>β</strong></li>
<li><strong>叶结点</strong>的标号既可以是非终结符，也可以是终结符。从左到右排列叶节点得到的符号串称为是这棵树的产出(yield)或边缘(frontier)</li>
</ul>
</li>
</ul>
<hr>
<h3 id="二义性文法"><a href="#二义性文法" class="headerlink" title="二义性文法"></a>二义性文法</h3><p>如果一个文法可以为某个句子生成多棵分析树，则称这个文法是二义性的</p>
<p>例：<br>文法：S → <strong>if</strong> E <strong>then</strong> S | <strong>if</strong> E <strong>then</strong> S <strong>else</strong> S | <strong>other</strong><br>句型：<strong>if</strong> E1 <strong>then</strong> <strong>if</strong> E2 <strong>then</strong> S1 <strong>else</strong> S2<br>    可生成的分析树有：<br><img src="/images/728669562437023693.jpg" width="500"></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录&lt;/p&gt;
    
    </summary>
    
      <category term="原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="原理" scheme="http://gaufoo.com/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="编译原理" scheme="http://gaufoo.com/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Hexo下的NexT主题配置（下）</title>
    <link href="http://gaufoo.com/2017/09/06/Hexo%E4%B8%8B%E7%9A%84NexT%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
    <id>http://gaufoo.com/2017/09/06/Hexo下的NexT主题配置（下）/</id>
    <published>2017-09-06T09:40:00.000Z</published>
    <updated>2017-09-06T12:51:52.367Z</updated>
    
    <content type="html"><![CDATA[<p>上期链接：<a href="http://gaufoo.com/2017/08/23/Hexo下的NexT主题配置（上）/">http://gaufoo.com/2017/08/23/Hexo下的NexT主题配置（上）/</a></p>
<a id="more"></a>
<hr>
<h2 id="文章设置"><a href="#文章设置" class="headerlink" title="文章设置"></a>文章设置</h2><h3 id="直达余下全文"><a href="#直达余下全文" class="headerlink" title="直达余下全文"></a>直达余下全文</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">scroll_to_more:</span> <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>点击阅读全文后，是否直达 <code>&lt;!--more--&gt;</code> 后的余下全文位置。</p>
<h3 id="保存页面位置"><a href="#保存页面位置" class="headerlink" title="保存页面位置"></a>保存页面位置</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">save_scroll:</span> <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>是否在cookies里为每个页面保存阅读位置。</p>
<h3 id="自动序言"><a href="#自动序言" class="headerlink" title="自动序言"></a>自动序言</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>主页显示文章是否自动摘录描述作为序言。</p>
<h3 id="截取序言"><a href="#截取序言" class="headerlink" title="截取序言"></a>截取序言</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">auto_excerpt:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  length:</span> <span class="number">150</span></div></pre></td></tr></table></figure>
<p>不建议开启，推荐使用 <code>&lt;!--more--&gt;</code> 来精确控制序言。</p>
<h3 id="作者信息"><a href="#作者信息" class="headerlink" title="作者信息"></a>作者信息</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attr">post_meta:</span></div><div class="line"><span class="attr">  item_text:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  created_at:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  updated_at:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  categories:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p><code>created_at</code>：是否显示创建时间，<code>updated_at</code>：是否显示更新时间， <code>categories</code>：是否显示分类目录。</p>
<h3 id="字数统计信息"><a href="#字数统计信息" class="headerlink" title="字数统计信息"></a>字数统计信息</h3><p>启动功能需要下载插件：<a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="external">https://github.com/willin/hexo-wordcount</a><br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attr">post_wordcount:</span></div><div class="line"><span class="attr">  item_text:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  wordcount:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  min2read:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  totalcount:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  separated_meta:</span> <span class="literal">false</span></div></pre></td></tr></table></figure></p>
<p><code>wordcount</code>：开启字数统计，<code>min2read</code>：开启大致阅读时间，<code>totalcount</code>：开启所有文章总字体显示，<code>separated_meta</code>：开启独占一行。</p>
<h3 id="微信二维码"><a href="#微信二维码" class="headerlink" title="微信二维码"></a>微信二维码</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">wechat_subscriber:</span></div><div class="line"><span class="attr">  enabled:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  qcode:</span> <span class="string">/path/to/your/wechatqcode</span> <span class="string">ex.</span> <span class="string">/uploads/wechat-qcode.jpg</span></div><div class="line"><span class="attr">  description:</span> <span class="string">ex.</span> <span class="string">subscribe</span> <span class="string">to</span> <span class="string">my</span> <span class="string">blog</span> <span class="string">by</span> <span class="string">scanning</span> <span class="string">my</span> <span class="string">public</span> <span class="string">wechat</span> <span class="string">account</span></div></pre></td></tr></table></figure>
<p><code>enabled</code>：文末是否开启微信二维码显示，<code>qcode</code>：二维码图片所在路径，示例: <code>/uploads/wechat-qcode.jpg</code>，<code>description</code>：二维码底下的简要描述文字。</p>
<h3 id="打赏"><a href="#打赏" class="headerlink" title="打赏"></a>打赏</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">reward_comment:</span> <span class="string">您的支持将鼓励我继续创作！</span></div><div class="line"><span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.jpg</span></div><div class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.jpg</span></div><div class="line"><span class="attr">bitcoin:</span> <span class="string">/images/bitcoin.png</span></div></pre></td></tr></table></figure>
<p><code>reward_comment</code>：打赏提示性语句，<code>wechatpay</code>：微信支付二维码图片存储路径，<code>alipay</code>：支付宝二维码图片存储路径，<code>bitcoin</code>：比特币支付二维码图片存储路径。</p>
<h3 id="文章版权声明"><a href="#文章版权声明" class="headerlink" title="文章版权声明"></a>文章版权声明</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">post_copyright:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  license:</span> <span class="string">CC</span> <span class="string">BY-NC-ND</span> <span class="number">3.0</span></div><div class="line"><span class="attr">  license_url:</span> <span class="attr">https://creativecommons.org/licenses/by-nc-nd/3.0/</span></div></pre></td></tr></table></figure>
<p><code>enable</code>：开启版权声明提醒，<code>license</code>：版权声明类型，<code>license_url</code>：全球版权页</p>
<hr>
<h2 id="Misc-主题方案设置"><a href="#Misc-主题方案设置" class="headerlink" title="Misc 主题方案设置"></a>Misc 主题方案设置</h2><h3 id="移动设备减少边框"><a href="#移动设备减少边框" class="headerlink" title="移动设备减少边框"></a>移动设备减少边框</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">mobile_layout_economy:</span> <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>不建议true</p>
<h3 id="安卓设备面板颜色"><a href="#安卓设备面板颜色" class="headerlink" title="安卓设备面板颜色"></a>安卓设备面板颜色</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">android_chrome_color:</span> <span class="string">"#222"</span></div></pre></td></tr></table></figure>
<h3 id="代码高亮主题"><a href="#代码高亮主题" class="headerlink" title="代码高亮主题"></a>代码高亮主题</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">highlight_theme:</span> <span class="string">normal</span></div></pre></td></tr></table></figure>
<p><code>highlight_theme</code>：可用值为：<code>normal</code>，<code>night</code>，<code>night eighties</code>，<code>night blue</code>，<code>night bright</code><br>效果示例： <a href="https://github.com/chriskempson/tomorrow-theme" target="_blank" rel="external">https://github.com/chriskempson/tomorrow-theme</a></p>
<hr>
<h2 id="字体设置"><a href="#字体设置" class="headerlink" title="字体设置"></a>字体设置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">font:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  host:</span></div></pre></td></tr></table></figure>
<p><code>host</code>：外链字体库地址，例如 //fonts.googleapis.com (默认值)</p>
<h3 id="全局字体"><a href="#全局字体" class="headerlink" title="全局字体"></a>全局字体</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">global:</span></div><div class="line"><span class="attr">  external:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  family:</span> <span class="string">Lato</span></div></pre></td></tr></table></figure>
<p>全局字体将应用在body元素上，<code>external</code>表示从<code>host</code>加载字体库，<code>family</code>：选择字体。</p>
<h3 id="标题字体"><a href="#标题字体" class="headerlink" title="标题字体"></a>标题字体</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">headings:</span></div><div class="line"><span class="attr">  external:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  family:</span></div></pre></td></tr></table></figure>
<p>标题字体将应用于h1,h2,h3,h4,h5,h6标题上，<code>external</code>同上，<code>family</code>：选择字体，空白则应用全局字体。</p>
<h3 id="文章字体"><a href="#文章字体" class="headerlink" title="文章字体"></a>文章字体</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">posts:</span></div><div class="line"><span class="attr">  external:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  family:</span></div></pre></td></tr></table></figure>
<p><code>external</code>、<code>family</code>同上。</p>
<h3 id="LOGO-字体"><a href="#LOGO-字体" class="headerlink" title="LOGO 字体"></a>LOGO 字体</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">logo:</span></div><div class="line"><span class="attr">  external:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  family:</span></div><div class="line"><span class="attr">  size:</span></div></pre></td></tr></table></figure>
<p><code>external</code>、<code>family</code>同上。<code>size</code>：字体大小单独设置。</p>
<h3 id="代码块字体"><a href="#代码块字体" class="headerlink" title="代码块字体"></a>代码块字体</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">codes:</span></div><div class="line"><span class="attr">  external:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  family:</span></div><div class="line"><span class="attr">  size:</span></div></pre></td></tr></table></figure>
<p><code>external</code>、<code>family</code>、<code>size</code>同上。</p>
<hr>
<h2 id="第三方服务设置"><a href="#第三方服务设置" class="headerlink" title="第三方服务设置"></a>第三方服务设置</h2><h3 id="MathJax"><a href="#MathJax" class="headerlink" title="MathJax"></a>MathJax</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">mathjax:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  per_page:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  cdn:</span> <span class="string">//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML</span></div></pre></td></tr></table></figure>
<p><code>enable</code>：是否开启 MathJax 来显示数学公式，<code>cdn</code>：用于指定 MathJax 的脚本地址，默认是 MathJax 官方提供的 CDN 地址。</p>
<h3 id="Han"><a href="#Han" class="headerlink" title="Han"></a>Han</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">han:</span> <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>文档：<a href="https://hanzi.pro/" target="_blank" rel="external">https://hanzi.pro/</a></p>
<h3 id="Swiftype-站内搜索"><a href="#Swiftype-站内搜索" class="headerlink" title="Swiftype 站内搜索"></a>Swiftype 站内搜索</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">swiftype_key:</span></div></pre></td></tr></table></figure>
<p>填写Swiftype Search API的值</p>
<h3 id="百度分析"><a href="#百度分析" class="headerlink" title="百度分析"></a>百度分析</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">baidu_analytics:</span></div></pre></td></tr></table></figure>
<p>填写百度分析ID</p>
<h3 id="多说"><a href="#多说" class="headerlink" title="多说"></a>多说</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="attr">duoshuo_shortname:</span></div><div class="line"></div><div class="line"><span class="attr">duoshuo_share:</span> <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="attr">duoshuo_info:</span></div><div class="line"><span class="attr">  ua_enable:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  admin_enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  user_id:</span> <span class="number">0</span></div><div class="line"><span class="attr">  admin_nickname:</span> <span class="string">Author</span></div></pre></td></tr></table></figure>
<p>相关：<a href="http://dev.duoshuo.com" target="_blank" rel="external">http://dev.duoshuo.com</a></p>
<h3 id="Disqus"><a href="#Disqus" class="headerlink" title="Disqus"></a>Disqus</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">disqus:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  shortname:</span></div><div class="line"><span class="attr">  count:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p><code>enable</code>：是否开启 Disqus 评论，<code>count</code>：是否显示评论数</p>
<h3 id="Hypercomments"><a href="#Hypercomments" class="headerlink" title="Hypercomments"></a>Hypercomments</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">hypercomments_id:</span></div></pre></td></tr></table></figure>
<h3 id="畅言"><a href="#畅言" class="headerlink" title="畅言"></a>畅言</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">changyan:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  appid:</span></div><div class="line"><span class="attr">  appkey:</span></div></pre></td></tr></table></figure>
<h3 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="attr">valine:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  appid:</span>  <span class="comment"># your leancloud application appid</span></div><div class="line"><span class="attr">  appkey:</span>  <span class="comment"># your leancloud application appkey</span></div><div class="line"><span class="attr">  notify:</span> <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></div><div class="line"><span class="attr">  verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></div><div class="line"><span class="attr">  placeholder:</span> <span class="string">Comment</span> <span class="string">input</span> <span class="string">placeholder</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://leancloud.cn" target="_blank" rel="external">https://leancloud.cn</a></p>
<h3 id="友言"><a href="#友言" class="headerlink" title="友言"></a>友言</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">youyan_uid:</span> <span class="string">your</span> <span class="string">uid</span></div></pre></td></tr></table></figure>
<h3 id="LiveRe"><a href="#LiveRe" class="headerlink" title="LiveRe"></a>LiveRe</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">livere_uid:</span> <span class="string">your</span> <span class="string">uid</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://livere.com/insight/myCode" target="_blank" rel="external">https://livere.com/insight/myCode</a></p>
<h3 id="百度分享"><a href="#百度分享" class="headerlink" title="百度分享"></a>百度分享</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">baidushare:</span></div><div class="line"><span class="attr">  type:</span> <span class="string">button</span></div></pre></td></tr></table></figure>
<p>注意：百度分享不支持https。<code>type</code>可选项：<code>button</code>，<code>slice</code>。</p>
<h3 id="JiaThis"><a href="#JiaThis" class="headerlink" title="JiaThis"></a>JiaThis</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">add_this_id:</span></div></pre></td></tr></table></figure>
<p>相关：<a href="http://www.jiathis.com/" target="_blank" rel="external">http://www.jiathis.com/</a></p>
<h3 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">google_site_verification:</span></div></pre></td></tr></table></figure>
<p>Google 验证码，相关：<a href="https://www.google.com/webmasters/" target="_blank" rel="external">https://www.google.com/webmasters/</a><br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">google_analytics:</span></div></pre></td></tr></table></figure></p>
<p>Google 分析</p>
<h3 id="Yandex"><a href="#Yandex" class="headerlink" title="Yandex"></a>Yandex</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">yandex_site_verification:</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://webmaster.yandex.ru/" target="_blank" rel="external">https://webmaster.yandex.ru/</a></p>
<h3 id="CNZZ-统计"><a href="#CNZZ-统计" class="headerlink" title="CNZZ 统计"></a>CNZZ 统计</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">cnzz_siteid:</span></div></pre></td></tr></table></figure>
<h3 id="Application-Insights"><a href="#Application-Insights" class="headerlink" title="Application Insights"></a>Application Insights</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">application_insights:</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://azure.microsoft.com/en-us/services/application-insights/" target="_blank" rel="external">https://azure.microsoft.com/en-us/services/application-insights/</a></p>
<h3 id="Facebook-SDK"><a href="#Facebook-SDK" class="headerlink" title="Facebook SDK"></a>Facebook SDK</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attr">facebook_sdk:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  app_id:</span>       <span class="comment">#&lt;app_id&gt;</span></div><div class="line"><span class="attr">  fb_admin:</span>     <span class="comment">#&lt;user_id&gt;</span></div><div class="line"><span class="attr">  like_button:</span>  <span class="comment">#true</span></div><div class="line"><span class="attr">  webmaster:</span>    <span class="comment">#true</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://github.com/iissnan/hexo-theme-next/pull/410" target="_blank" rel="external">https://github.com/iissnan/hexo-theme-next/pull/410</a></p>
<h3 id="Facebook-评论"><a href="#Facebook-评论" class="headerlink" title="Facebook 评论"></a>Facebook 评论</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attr">facebook_comments_plugin:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  num_of_posts:</span> <span class="number">10</span>  <span class="comment"># min posts num is 1</span></div><div class="line"><span class="attr">  width:</span> <span class="number">100</span><span class="string">%</span>       <span class="comment"># default width is 550px</span></div><div class="line"><span class="attr">  scheme:</span> <span class="string">light</span>     <span class="comment"># default scheme is light (light or dark)</span></div></pre></td></tr></table></figure>
<h3 id="VKontakte-API"><a href="#VKontakte-API" class="headerlink" title="VKontakte API"></a>VKontakte API</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attr">vkontakte_api:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  app_id:</span>       <span class="comment">#&lt;app_id&gt;</span></div><div class="line"><span class="attr">  like:</span>         <span class="literal">true</span></div><div class="line"><span class="attr">  comments:</span>     <span class="literal">true</span></div><div class="line"><span class="attr">  num_of_posts:</span> <span class="number">10</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://vk.com/editapp?act=create" target="_blank" rel="external">https://vk.com/editapp?act=create</a></p>
<h3 id="星星评级"><a href="#星星评级" class="headerlink" title="星星评级"></a>星星评级</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">rating:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  id:</span>     <span class="comment">#&lt;app_id&gt;</span></div><div class="line"><span class="attr">  color:</span>  <span class="string">fc6423</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://widgetpack.com" target="_blank" rel="external">https://widgetpack.com</a></p>
<h3 id="阅读数统计"><a href="#阅读数统计" class="headerlink" title="阅读数统计"></a>阅读数统计</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">leancloud_visitors:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  app_id:</span> <span class="comment">#&lt;app_id&gt;</span></div><div class="line"><span class="attr">  app_key:</span> <span class="comment">#&lt;app_key&gt;</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://leancloud.cn" target="_blank" rel="external">https://leancloud.cn</a></p>
<h3 id="不蒜子统计"><a href="#不蒜子统计" class="headerlink" title="不蒜子统计"></a>不蒜子统计</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="attr">busuanzi_count:</span></div><div class="line">  <span class="comment"># count values only if the other configs are false</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line">  <span class="comment"># custom uv span for the whole site</span></div><div class="line"><span class="attr">  site_uv:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  site_uv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-user"&gt;&lt;/i&gt;</span></div><div class="line"><span class="attr">  site_uv_footer:</span></div><div class="line">  <span class="comment"># custom pv span for the whole site</span></div><div class="line"><span class="attr">  site_pv:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  site_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-eye"&gt;&lt;/i&gt;</span></div><div class="line"><span class="attr">  site_pv_footer:</span></div><div class="line">  <span class="comment"># custom pv span for one page only</span></div><div class="line"><span class="attr">  page_pv:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  page_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-file-o"&gt;&lt;/i&gt;</span></div><div class="line"><span class="attr">  page_pv_footer:</span></div></pre></td></tr></table></figure>
<p>相关：<a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="external">http://ibruce.info/2015/04/04/busuanzi/</a><br>例：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attr">busuanzi_count:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  site_uv:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  site_uv_header:</span> <span class="string">本站访客数</span></div><div class="line"><span class="attr">  site_uv_footer:</span> <span class="string">人次</span></div><div class="line"><span class="attr">  site_pv:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  site_pv_header:</span> <span class="string">本站总访问量</span></div><div class="line"><span class="attr">  site_pv_footer:</span> <span class="string">次</span></div><div class="line"><span class="attr">  page_pv:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  page_pv_header:</span> <span class="string">本文总阅读量</span></div><div class="line"><span class="attr">  page_pv_footer:</span> <span class="string">次</span></div></pre></td></tr></table></figure></p>
<h3 id="腾讯分析"><a href="#腾讯分析" class="headerlink" title="腾讯分析"></a>腾讯分析</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">tencent_analytics:</span></div></pre></td></tr></table></figure>
<p>移动分析<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">tencent_mta:</span></div></pre></td></tr></table></figure></p>
<h3 id="推送百度"><a href="#推送百度" class="headerlink" title="推送百度"></a>推送百度</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">baidu_push:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>自动把博客推送到百度上，更容易被搜索。</p>
<h3 id="Google-日历"><a href="#Google-日历" class="headerlink" title="Google 日历"></a>Google 日历</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attr">calendar:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  calendar_id:</span> <span class="string">&lt;required&gt;</span></div><div class="line"><span class="attr">  api_key:</span> <span class="string">&lt;required&gt;</span></div><div class="line"><span class="attr">  orderBy:</span> <span class="string">startTime</span></div><div class="line"><span class="attr">  offsetMax:</span> <span class="number">24</span></div><div class="line"><span class="attr">  offsetMin:</span> <span class="number">4</span></div><div class="line"><span class="attr">  timeZone:</span></div><div class="line"><span class="attr">  showDeleted:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  singleEvents:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  maxResults:</span> <span class="number">250</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://developers.google.com/google-apps/calendar/v3/reference/events/list" target="_blank" rel="external">https://developers.google.com/google-apps/calendar/v3/reference/events/list</a></p>
<h3 id="Algolia-搜索"><a href="#Algolia-搜索" class="headerlink" title="Algolia 搜索"></a>Algolia 搜索</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attr">algolia_search:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  hits:</span></div><div class="line"><span class="attr">    per_page:</span> <span class="number">10</span></div><div class="line"><span class="attr">  labels:</span></div><div class="line"><span class="attr">    input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></div><div class="line"><span class="attr">    hits_empty:</span> <span class="string">"We didn't find any results for the search: $&#123;query&#125;"</span></div><div class="line"><span class="attr">    hits_stats:</span> <span class="string">"$&#123;hits&#125; results found in $&#123;time&#125; ms"</span></div></pre></td></tr></table></figure>
<h3 id="Local-搜索"><a href="#Local-搜索" class="headerlink" title="Local 搜索"></a>Local 搜索</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">local_search:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  trigger:</span> <span class="string">aut</span></div><div class="line"><span class="attr">  top_n_per_article:</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<p>相关：<a href="https://github.com/flashlab/hexo-generator-search" target="_blank" rel="external">https://github.com/flashlab/hexo-generator-search</a></p>
<hr>
<h2 id="动画设置"><a href="#动画设置" class="headerlink" title="动画设置"></a>动画设置</h2><h3 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">use_motion:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>加载页面时的动画是否开启。</p>
<h3 id="背景动画"><a href="#背景动画" class="headerlink" title="背景动画"></a>背景动画</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">canvas_nest:</span> <span class="literal">false</span></div><div class="line"><span class="attr">three_waves:</span> <span class="literal">false</span></div><div class="line"><span class="attr">canvas_lines:</span> <span class="literal">false</span></div><div class="line"><span class="attr">canvas_sphere:</span> <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>四种背景动画只能选一种改为true，不过不建议开启，影响注意力。</p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;上期链接：&lt;a href=&quot;http://gaufoo.com/2017/08/23/Hexo下的NexT主题配置（上）/&quot;&gt;http://gaufoo.com/2017/08/23/Hexo下的NexT主题配置（上）/&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo教程" scheme="http://gaufoo.com/categories/Hexo%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Hexo" scheme="http://gaufoo.com/tags/Hexo/"/>
    
      <category term="配置" scheme="http://gaufoo.com/tags/%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>C之32位二进制数内1的个数求法</title>
    <link href="http://gaufoo.com/2017/09/05/C%E4%B9%8B32%E4%BD%8D%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E5%86%851%E7%9A%84%E4%B8%AA%E6%95%B0%E6%B1%82%E6%B3%95/"/>
    <id>http://gaufoo.com/2017/09/05/C之32位二进制数内1的个数求法/</id>
    <published>2017-09-05T13:43:00.000Z</published>
    <updated>2017-09-07T09:54:13.757Z</updated>
    
    <content type="html"><![CDATA[<p>《CSAPP》上的题目，略有难度。</p>
<a id="more"></a>
<hr>
<h2 id="问题来源"><a href="#问题来源" class="headerlink" title="问题来源"></a>问题来源</h2><p><img src="/images/606816650151851360.jpg" width="360" alt="图片名称"></p>
<hr>
<h2 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h2><ol>
<li>编程语言：C</li>
<li>可用操作符：! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</li>
<li>最大操作步数：40</li>
<li>最大操作数：255</li>
</ol>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><h3 id="获取2位二进制数内”1”个数"><a href="#获取2位二进制数内”1”个数" class="headerlink" title="获取2位二进制数内”1”个数"></a>获取2位二进制数内”1”个数</h3><p>设该数为<code>x</code>，则答案易得为<code>(x &amp; 01) + ((x &gt;&gt; 1) &amp; 01)</code></p>
<h3 id="获取4位二进制数内”1”个数"><a href="#获取4位二进制数内”1”个数" class="headerlink" title="获取4位二进制数内”1”个数"></a>获取4位二进制数内”1”个数</h3><p>设该数为<code>x</code><br>可以先把每两位的”1”个数求出，再加起来。</p>
<ol>
<li><code>y = (x &amp; 0101) + ((x &gt;&gt; 1) &amp; 0101)</code></li>
<li><code>count = (y &amp; 0011) + ((y &gt;&gt; 10) &amp; 0011)</code></li>
</ol>
<h3 id="获取8位二进制数内”1”个数"><a href="#获取8位二进制数内”1”个数" class="headerlink" title="获取8位二进制数内”1”个数"></a>获取8位二进制数内”1”个数</h3><p>设该数为<code>x</code><br>把每两位的”1”个数求出，存储在每两位中。再把每四位的”1”个数求出，存储在每四位中。最后加起来。</p>
<ol>
<li><code>y = (x &amp; 01010101) + ((x &gt;&gt; 1) &amp; 01010101)</code></li>
<li><code>z = (y &amp; 00110011) + ((y &gt;&gt; 10) &amp; 00110011)</code></li>
<li><code>count = (z &amp; 00001111) + ((z &gt;&gt; 1000) &amp; 00001111)</code></li>
</ol>
<blockquote>
<p>···<br>···<br>···</p>
</blockquote>
<h3 id="获取32位二进制数内”1”个数"><a href="#获取32位二进制数内”1”个数" class="headerlink" title="获取32位二进制数内”1”个数"></a>获取32位二进制数内”1”个数</h3><ol>
<li>每两位数存”1”的个数：<br><code>storePer2 = (0x???????? &amp; 0x55555555) + ((0x???????? &gt;&gt; 1) &amp; 0x55555555)</code></li>
<li>每四位数存”1”的个数：<br><code>storePer4 = (storePer2 &amp; 0x33333333) + ((storePer2 &gt;&gt; 2) &amp; 0x33333333)</code></li>
<li>每八位数存”1”的个数：<br><code>storePer8 = (storePer4 &amp; 0x0f0f0f0f) + ((storePer4 &gt;&gt; 4) &amp; 0x0f0f0f0f)</code></li>
<li>每十六位数存”1”的个数：<br><code>storePer16 = (storePer8 &amp; 0x00ff00ff) + ((storePer8 &gt;&gt; 8) &amp; 0x00ff00ff)</code></li>
<li>用32位数来存储结果：<br><code>count = (storePer16 &amp; 0x0000ffff) + ((storePer16 &gt;&gt; 16) &amp; 0x0000ffff)</code></li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * bitCount - returns count of number of 1's in word</span></div><div class="line"><span class="comment"> *   Examples: bitCount(5) = 2, bitCount(7) = 3</span></div><div class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></div><div class="line"><span class="comment"> *   Max ops: 40</span></div><div class="line"><span class="comment"> *   Rating: 4</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitCount</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="keyword">int</span> tmpMask1 = (<span class="number">0x55</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">8</span>);</div><div class="line">	<span class="keyword">int</span> mask1 = (tmpMask1) | (tmpMask1 &lt;&lt; <span class="number">16</span>);</div><div class="line">	<span class="keyword">int</span> tmpMask2 = (<span class="number">0x33</span>) | (<span class="number">0x33</span> &lt;&lt; <span class="number">8</span>);</div><div class="line">	<span class="keyword">int</span> mask2 = (tmpMask2) | (tmpMask2 &lt;&lt; <span class="number">16</span>);</div><div class="line">	<span class="keyword">int</span> tmpMask3 = (<span class="number">0x0f</span>) | (<span class="number">0x0f</span> &lt;&lt; <span class="number">8</span>);</div><div class="line">	<span class="keyword">int</span> mask3 = (tmpMask3) | (tmpMask3 &lt;&lt; <span class="number">16</span>);</div><div class="line">	<span class="keyword">int</span> mask4 = (<span class="number">0xff</span>) | (<span class="number">0xff</span> &lt;&lt; <span class="number">16</span>);</div><div class="line">	<span class="keyword">int</span> mask5 = (<span class="number">0xff</span>) | (<span class="number">0xff</span> &lt;&lt; <span class="number">8</span>);</div><div class="line">	<span class="keyword">int</span> count = x;</div><div class="line">	count = (count &amp; mask1) + ((count &gt;&gt; <span class="number">1</span>) &amp; mask1);</div><div class="line">	count = (count &amp; mask2) + ((count &gt;&gt; <span class="number">2</span>) &amp; mask2);</div><div class="line">	count = (count &amp; mask3) + ((count &gt;&gt; <span class="number">4</span>) &amp; mask3);</div><div class="line">	count = (count &amp; mask4) + ((count &gt;&gt; <span class="number">8</span>) &amp; mask4);</div><div class="line">	count = (count &amp; mask5) + ((count &gt;&gt; <span class="number">16</span>) &amp; mask5);</div><div class="line">	<span class="keyword">return</span> count;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"bitCount(5) = %d\nbitCount(7) = %d\n"</span>, bitCount(<span class="number">5</span>), bitCount(<span class="number">7</span>));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;《CSAPP》上的题目，略有难度。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/C/"/>
    
    
      <category term="C" scheme="http://gaufoo.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Python之Re库学习笔记</title>
    <link href="http://gaufoo.com/2017/09/05/Python%E4%B9%8BRe%E5%BA%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://gaufoo.com/2017/09/05/Python之Re库学习笔记/</id>
    <published>2017-09-05T09:05:00.000Z</published>
    <updated>2017-09-06T09:17:49.869Z</updated>
    
    <content type="html"><![CDATA[<p>记录以备后用</p>
<a id="more"></a>
<hr>
<h2 id="正则表达式的使用"><a href="#正则表达式的使用" class="headerlink" title="正则表达式的使用"></a>正则表达式的使用</h2><h3 id="常用操作符"><a href="#常用操作符" class="headerlink" title="常用操作符"></a>常用操作符</h3><table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>表示任何单个字符</td>
<td>-</td>
</tr>
<tr>
<td>[ ]</td>
<td>字符集，对单个字符给出取值范围</td>
<td>[abc]表示a、b、c，[a‐z]表示a到z单个字符</td>
</tr>
<tr>
<td>[^ ]</td>
<td>非字符集，对单个字符给出排除范围</td>
<td>[^abc]表示非a或b或c的单个字符</td>
</tr>
<tr>
<td>*</td>
<td>前一个字符0次或无限次扩展</td>
<td>abc* 表示 ab、abc、abcc、abccc等</td>
</tr>
<tr>
<td>+</td>
<td>前一个字符1次或无限次扩展</td>
<td>abc+ 表示 abc、abcc、abccc等</td>
</tr>
<tr>
<td>?</td>
<td>前一个字符0次或1次扩展</td>
<td>abc? 表示 ab、abc</td>
</tr>
<tr>
<td>&#124;</td>
<td>左右表达式任意一个</td>
<td>abc&#124;def 表示 abc、def</td>
</tr>
<tr>
<td>{m}</td>
<td>扩展前一个字符m次</td>
<td>ab{2}c表示abbc</td>
</tr>
<tr>
<td>{m,n}</td>
<td>扩展前一个字符m至n次（含n）</td>
<td>ab{1,2}c表示abc、abbc</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串开头</td>
<td>^abc表示abc且在一个字符串的开头</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串结尾</td>
<td>abc$表示abc且在一个字符串的结尾</td>
</tr>
<tr>
<td>( )</td>
<td>分组标记，内部只能使用 &#124; 操作符</td>
<td>(abc)表示abc，(abc&#124;def)表示abc、def</td>
</tr>
<tr>
<td>\d</td>
<td>数字，等价于[0-9]</td>
<td>-</td>
</tr>
<tr>
<td>\w</td>
<td>单词字符，等价于[A-Za-z0-9_]</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="经典正则表达式实例"><a href="#经典正则表达式实例" class="headerlink" title="经典正则表达式实例"></a>经典正则表达式实例</h3><ul>
<li><code>^[A‐Za‐z]+$</code>：由26个字母组成的字符串</li>
<li><code>^[A‐Za‐z0‐9]+$</code>：由26个字母和数字组成的字符串</li>
<li><code>^‐?\d+$</code>：整数形式的字符串</li>
<li><code>[1‐9]\d{5}</code>：中国境内邮政编码，6位</li>
<li><code>[\u4e00‐\u9fa5]</code>：匹配中文字符、</li>
<li><code>\d{3}‐\d{8}|\d{4}‐\d{7}</code>：国内电话号码，010‐68913536</li>
<li>IP地址<ul>
<li>0-99：<code>[1‐9]?\d</code></li>
<li>100-199：<code>1\d{2}</code></li>
<li>200-249：<code>2[0‐4]\d</code></li>
<li>250-255：<code>25[0‐5]</code></li>
<li>总：<code>(([1‐9]?\d|1\d{2}|2[0‐4]\d|25[0‐5]).){3}([1‐9]?\d|1\d{2}|2[0‐4]\d|25[0‐5])</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="Re库主要功能函数"><a href="#Re库主要功能函数" class="headerlink" title="Re库主要功能函数"></a>Re库主要功能函数</h2><h3 id="re-search-pattern-string-flags-0"><a href="#re-search-pattern-string-flags-0" class="headerlink" title="re.search(pattern, string, flags=0)"></a>re.search(pattern, string, flags=0)</h3><p>在一个字符串中搜索匹配正则表达式的第一个位置，返回match对象</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>string</code>：待匹配字符串</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<hr>
<h3 id="re-match-pattern-string-flags-0"><a href="#re-match-pattern-string-flags-0" class="headerlink" title="re.match(pattern, string, flags=0)"></a>re.match(pattern, string, flags=0)</h3><p>从一个字符串的开始位置起匹配正则表达式，返回match对象</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>string</code>：待匹配字符串</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<hr>
<h3 id="re-findall-pattern-string-flags-0"><a href="#re-findall-pattern-string-flags-0" class="headerlink" title="re.findall(pattern, string, flags=0)"></a>re.findall(pattern, string, flags=0)</h3><p>搜索字符串，以列表类型返回全部能匹配的子串</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>string</code>：待匹配字符串</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<hr>
<h3 id="re-split-pattern-string-maxsplit-0-flags-0"><a href="#re-split-pattern-string-maxsplit-0-flags-0" class="headerlink" title="re.split(pattern, string, maxsplit=0, flags=0)"></a>re.split(pattern, string, maxsplit=0, flags=0)</h3><p>将一个字符串按照正则表达式匹配结果进行分割，返回列表类型</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>string</code>：待匹配字符串</li>
<li><code>maxsplit</code>：最大分割数，剩余部分作为最后一个元素输出</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<hr>
<h3 id="re-finditer-pattern-string-flags-0"><a href="#re-finditer-pattern-string-flags-0" class="headerlink" title="re.finditer(pattern, string, flags=0)"></a>re.finditer(pattern, string, flags=0)</h3><p>搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是match对象</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>string</code>：待匹配字符串</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<hr>
<h3 id="re-sub-pattern-repl-string-count-0-flags-0"><a href="#re-sub-pattern-repl-string-count-0-flags-0" class="headerlink" title="re.sub(pattern, repl, string, count=0, flags=0)"></a>re.sub(pattern, repl, string, count=0, flags=0)</h3><p>在一个字符串中替换所有匹配正则表达式的子串，返回替换后的字符串</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>repl</code>：替换匹配字符串的字符串</li>
<li><code>string</code>：待匹配字符串</li>
<li><code>count</code>：匹配的最大替换次数</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Re库另一种等价用法"><a href="#Re库另一种等价用法" class="headerlink" title="Re库另一种等价用法"></a>Re库另一种等价用法</h3><p><strong>regex = re.compile(pattern, flags=0)</strong><br>将正则表达式的字符串形式编译成正则表达式对象</p>
<ul>
<li><code>pattern</code>：正则表达式的字符串或原生字符串表示</li>
<li><code>flags</code>：正则表达式使用时的控制标记<ul>
<li><code>re.I</code> - re.IGNORECASE：忽略正则表达式的大小写，[A‐Z]能够匹配小写字符</li>
<li><code>re.M</code> - re.MULTILINE：正则表达式中的^操作符能够将给定字符串的每行当作匹配开始</li>
<li><code>re.S</code> - re.DOTALL：正则表达式中的.操作符能够匹配所有字符，默认匹配除换行外的所有字符</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>regex.search()</td>
<td>在一个字符串中搜索匹配正则表达式的第一个位置，返回match对象</td>
</tr>
<tr>
<td>regex.match()</td>
<td>从一个字符串的开始位置起匹配正则表达式，返回match对象</td>
</tr>
<tr>
<td>regex.findall()</td>
<td>搜索字符串，以列表类型返回全部能匹配的子串</td>
</tr>
<tr>
<td>regex.split()</td>
<td>将一个字符串按照正则表达式匹配结果进行分割，返回列表类型</td>
</tr>
<tr>
<td>regex.finditer()</td>
<td>搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是match对象</td>
</tr>
<tr>
<td>regex.sub()</td>
<td>在一个字符串中替换所有匹配正则表达式的子串，返回替换后的字符串</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="Re库的Match对象"><a href="#Re库的Match对象" class="headerlink" title="Re库的Match对象"></a>Re库的Match对象</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ul>
<li><code>.string</code>：待匹配的文本</li>
<li><code>.re</code>：匹配时使用的patter对象（正则表达式）</li>
<li><code>.pos</code>：正则表达式搜索文本的开始位置</li>
<li><code>.endpos</code>：正则表达式搜索文本的结束位置</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li><code>.group(0)</code>：获得匹配后的字符串</li>
<li><code>.start()</code>：匹配字符串在原始字符串的开始位置</li>
<li><code>.end()</code>：匹配字符串在原始字符串的结束位置</li>
<li><code>.span()</code>：返回(.start(), .end())</li>
</ul>
<hr>
<h2 id="Re库的贪婪匹配和最小匹配"><a href="#Re库的贪婪匹配和最小匹配" class="headerlink" title="Re库的贪婪匹配和最小匹配"></a>Re库的贪婪匹配和最小匹配</h2><p>Re库默认采用贪婪匹配，即输出匹配最长的子串<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.search(<span class="string">r'PY.*N'</span>, <span class="string">'PYANBNCNDN'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>match.group(<span class="number">0</span>)</div><div class="line"><span class="string">'PYANBNCNDN'</span></div></pre></td></tr></table></figure></p>
<h3 id="最小匹配操作符"><a href="#最小匹配操作符" class="headerlink" title="最小匹配操作符"></a>最小匹配操作符</h3><p>只要长度输出可能不同的，都可以通过在操作符后增加?变成最小匹配</p>
<ul>
<li><code>*?</code>：前一个字符0次或无限次扩展，最小匹配</li>
<li><code>+?</code>：前一个字符1次或无限次扩展，最小匹配</li>
<li><code>??</code>：前一个字符0次或1次扩展，最小匹配</li>
<li><code>{m,n}?</code>：扩展前一个字符m至n次（含n），最小匹配</li>
</ul>
<p>输出最短的子串<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.search(<span class="string">r'PY.*?N'</span>, <span class="string">'PYANBNCNDN'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>match.group(<span class="number">0</span>)</div><div class="line"><span class="string">'PYAN'</span></div></pre></td></tr></table></figure></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录以备后用&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Python" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
      <category term="Python" scheme="http://gaufoo.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Linux常用命令，持续更新</title>
    <link href="http://gaufoo.com/2017/09/05/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%8C%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"/>
    <id>http://gaufoo.com/2017/09/05/Linux常用命令，持续更新/</id>
    <published>2017-09-05T07:14:00.000Z</published>
    <updated>2017-09-06T09:17:26.979Z</updated>
    
    <content type="html"><![CDATA[<p>记录<br><a id="more"></a></p>
<hr>
<h2 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h2><table>
<thead>
<tr>
<th>按键</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ctrl+d</code></td>
<td>键盘输入结束或退出终端</td>
</tr>
<tr>
<td><code>Ctrl+s</code></td>
<td>暂停当前程序，暂停后按下任意键恢复运行</td>
</tr>
<tr>
<td><code>Ctrl+z</code></td>
<td>将当前程序放到后台运行，恢复到前台为命令<code>fg</code></td>
</tr>
<tr>
<td><code>Ctrl+a</code></td>
<td>将光标移至输入行头，相当于<code>Home</code></td>
</tr>
<tr>
<td><code>Ctrl+e</code></td>
<td>将光标移至输入行末，相当于<code>End</code></td>
</tr>
<tr>
<td><code>Ctrl+k</code></td>
<td>删除从光标所在位置到行末</td>
</tr>
<tr>
<td><code>Alt+Backspave</code></td>
<td>向前删除一个单词</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="常用通配符"><a href="#常用通配符" class="headerlink" title="常用通配符"></a>常用通配符</h2><table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>匹配0或多个字符</td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配任意一个字符</td>
</tr>
<tr>
<td><code>[list]</code></td>
<td>匹配list中的任意单一字符</td>
</tr>
<tr>
<td><code>[!list]</code></td>
<td>匹配除list中的任意单一字符</td>
</tr>
<tr>
<td><code>[c1-c2]</code></td>
<td>匹配c1-c2中的任意单一字符 如：<code>[0-9]</code> <code>[a-z]</code></td>
</tr>
<tr>
<td><code>{string1,string2,...}</code></td>
<td>匹配string1或string2（或更多）其一字符串</td>
</tr>
<tr>
<td><code>{c1..c2}</code></td>
<td>匹配c1-c2中全部字符 如{1..10}</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h2><h3 id="查看文件权限"><a href="#查看文件权限" class="headerlink" title="查看文件权限"></a>查看文件权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ls -l</span></div><div class="line">drwxr-xr-x 2 gaufoo gaufoo 4096 11月 6 15:30 Document</div></pre></td></tr></table></figure>
<ul>
<li>文件类型<br> <code>d</code>：目录<br> <code>l</code>：软链接<br> <code>b</code>：块设备<br> <code>c</code>：字符设备<br> <code>s</code>：socket<br> <code>p</code>：管道<br> <code>-</code>：普通文件</li>
<li>文件权限<br> <code>r</code>：读<br> <code>w</code>：写<br> <code>x</code>：执行 </li>
</ul>
<h3 id="变更文件所有者"><a href="#变更文件所有者" class="headerlink" title="变更文件所有者"></a>变更文件所有者</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo chown ??? ???</span></div></pre></td></tr></table></figure>
<h3 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> chmod 700 ???</span></div></pre></td></tr></table></figure>
<h2 id="文件基本操作"><a href="#文件基本操作" class="headerlink" title="文件基本操作"></a>文件基本操作</h2><h3 id="复制目录"><a href="#复制目录" class="headerlink" title="复制目录"></a>复制目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> cp -r ??? ???</span></div></pre></td></tr></table></figure>
<h3 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> rm -r ???</span></div></pre></td></tr></table></figure>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://gaufoo.com/categories/Linux/"/>
    
      <category term="命令" scheme="http://gaufoo.com/categories/Linux/%E5%91%BD%E4%BB%A4/"/>
    
    
      <category term="Linux" scheme="http://gaufoo.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>操作系统boot实验报告</title>
    <link href="http://gaufoo.com/2017/09/03/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9Fboot%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <id>http://gaufoo.com/2017/09/03/操作系统boot实验报告/</id>
    <published>2017-09-03T07:14:00.000Z</published>
    <updated>2017-09-06T09:18:08.350Z</updated>
    
    <content type="html"><![CDATA[<p>HIT操作系统课程第一个实验。</p>
<a id="more"></a>
<hr>
<h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><ul>
<li>熟悉hit-oslab实验环境；</li>
<li>建立对操作系统引导过程的深入认识；</li>
<li>掌握操作系统的基本开发过程；</li>
<li>能对操作系统代码进行简单的控制，揭开操作系统的神秘面纱。</li>
</ul>
<hr>
<h2 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h2><p>此次实验的基本内容是：</p>
<ol>
<li>阅读《Linux内核完全注释》的第6章，对计算机和Linux 0.11的引导过程进行初步的了解；</li>
<li>按照下面的要求改写0.11的引导程序bootsect.s</li>
<li>有兴趣同学可以做做进入保护模式前的设置程序setup.s。</li>
</ol>
<p>改写bootsect.s主要完成如下功能：</p>
<ol>
<li>bootsect.s能在屏幕上打印一段提示信息“XXX is booting…”，其中XXX是你给自己的操作系统起的名字，例如LZJos、Sunix等（可以上论坛上秀秀谁的OS名字最帅，也可以显示一个特色logo，以表示自己操作系统的与众不同。）</li>
</ol>
<p>改写setup.s主要完成如下功能：</p>
<ol>
<li>bootsect.s能完成setup.s的载入，并跳转到setup.s开始地址执行。而setup.s向屏幕输出一行”Now we are in SETUP”。</li>
<li>setup.s能获取至少一个基本的硬件参数（如内存参数、显卡参数、硬盘参数等），将其存放在内存的特定地址，并输出到屏幕上。</li>
<li>setup.s不再加载Linux内核，保持上述信息显示在屏幕上即可。</li>
</ol>
<hr>
<h2 id="实验报告要求"><a href="#实验报告要求" class="headerlink" title="实验报告要求"></a>实验报告要求</h2><p>在实验报告中回答如下问题：</p>
<ol>
<li>有时，继承传统意味着别手蹩脚。x86计算机为了向下兼容，导致启动过程比较复杂。请找出x86计算机启动过程中，被硬件强制，软件必须遵守的两个“多此一举”的步骤（多找几个也无妨），说说它们为什么多此一举，并设计更简洁的替代方案。</li>
</ol>
<hr>
<h2 id="实验记录"><a href="#实验记录" class="headerlink" title="实验记录"></a>实验记录</h2><h3 id="改写bootsect-s："><a href="#改写bootsect-s：" class="headerlink" title="改写bootsect.s："></a>改写<code>bootsect.s</code>：</h3><ol>
<li><p>进入目录<code>~/oslab/linux-0.11/boot/</code>，执行<code>$ vi bootsect.s</code>，将<code>bootsect.s</code>修改如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">...</div><div class="line">! Print some inane message</div><div class="line"></div><div class="line">	mov	ah,#0x03		! read cursor pos</div><div class="line">	xor	bh,bh</div><div class="line">	int	0x10</div><div class="line">	</div><div class="line">	mov	cx,#29          ! 修改字符数</div><div class="line">	mov	bx,#0x0007		! page 0, attribute 7 (normal)</div><div class="line">	mov	bp,#msg1</div><div class="line">	mov	ax,#0x1301		! write string, move cursor</div><div class="line">	int	0x10</div><div class="line"></div><div class="line">! ok, we&apos;ve written the message, now</div><div class="line">...</div><div class="line">...</div><div class="line">msg1:</div><div class="line">	.byte 13,10</div><div class="line">	.ascii &quot;Fooooooos is loading...&quot;     ! 修改成自己的字符串</div><div class="line">	.byte 13,10,13,10</div><div class="line">...</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/linux-0.11/boot/</code>，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> as86 -0 -a -o bootsect.o bootsect.s</span></div><div class="line"><span class="meta">$</span><span class="bash"> ld86 -0 -s -o bootsect bootsect.o</span></div><div class="line"><span class="meta">$</span><span class="bash"> dd bs=1 <span class="keyword">if</span>=bootsect of=Image skip=32</span></div><div class="line"><span class="meta">$</span><span class="bash"> cp Image ../</span></div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/</code>，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ./run</span></div></pre></td></tr></table></figure>
</li>
<li><p>实验结果：<br><img src="/images/5193451504415525106-wm.png" alt="实验楼"></p>
</li>
</ol>
<hr>
<h3 id="读入setup-s并输出字符串："><a href="#读入setup-s并输出字符串：" class="headerlink" title="读入setup.s并输出字符串："></a>读入<code>setup.s</code>并输出字符串：</h3><ol>
<li><p>进入目录<code>~/oslab/linux-0.11/boot/</code>，执行<code>$ vi setup.s</code>，删除加载内核的88-223行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">! Check that there IS a hd1 :-)</div><div class="line"></div><div class="line">	mov	ax,#0x01500</div><div class="line">	mov	dl,#0x81</div><div class="line">	int	0x13</div><div class="line">	jc	no_disk1</div><div class="line">	cmp	ah,#3</div><div class="line">	je	is_disk1</div><div class="line">...</div><div class="line">...</div><div class="line">gdt_48:</div><div class="line">	.word	0x800		! gdt limit=2048, 256 GDT entries</div><div class="line">	.word	512+gdt,0x9	! gdt base = 0X9xxxx</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/linux-0.11/boot/</code>，执行<code>$ vi setup.s</code>，添加代码至<code>start:</code>后，以及末尾：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">...</div><div class="line">start:</div><div class="line"></div><div class="line">! Print some inane message</div><div class="line">	mov ax,cs</div><div class="line">	mov ds,ax</div><div class="line">	mov es,ax</div><div class="line">	mov	ah,#0x03		! read cursor pos</div><div class="line">	xor	bh,bh</div><div class="line">	int	0x10</div><div class="line">	</div><div class="line">	mov	cx,#24</div><div class="line">	mov	bx,#0x0007		! page 0, attribute 7 (normal)</div><div class="line">	mov	bp,#msg1</div><div class="line">	mov	ax,#0x1301		! write string, move cursor</div><div class="line">	int	0x10</div><div class="line">...</div><div class="line">...</div><div class="line">msg1:</div><div class="line">	.byte 13,10</div><div class="line">	.ascii &quot;Now we are in SETUP&quot;</div><div class="line">	.byte 13,10,13,10</div><div class="line">...</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/linux-0.11/tools/</code>，执行<code>$ vi build.c</code>，添加如下代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">...</div><div class="line">    <span class="keyword">while</span> (i&lt;SETUP_SECTS*<span class="number">512</span>) &#123;</div><div class="line">    	c = SETUP_SECTS*<span class="number">512</span>-i;</div><div class="line">    	<span class="keyword">if</span> (c &gt; <span class="keyword">sizeof</span>(buf))</div><div class="line">    		c = <span class="keyword">sizeof</span>(buf);</div><div class="line">    	<span class="keyword">if</span> (write(<span class="number">1</span>,buf,c) != c)</div><div class="line">    		die(<span class="string">"Write call failed"</span>);</div><div class="line">    	i += c;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="built_in">strcmp</span>(argv[<span class="number">3</span>], <span class="string">"none"</span>) == <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Ignore system written.\n"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> ((id=open(argv[<span class="number">3</span>],O_RDONLY,<span class="number">0</span>))&lt;<span class="number">0</span>)</div><div class="line">    	die(<span class="string">"Unable to open 'system'"</span>);</div><div class="line">...</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/linux-0.11/</code>，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> make BootImage</span></div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/</code>，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ./run</span></div></pre></td></tr></table></figure>
</li>
<li><p>实验结果：<br><img src="/images/5193451504417795652-wm.png" alt="实验楼"></p>
</li>
</ol>
<hr>
<h3 id="setup-s获取硬件参数，并显示："><a href="#setup-s获取硬件参数，并显示：" class="headerlink" title="setup.s获取硬件参数，并显示："></a><code>setup.s</code>获取硬件参数，并显示：</h3><ol>
<li><p>进入目录<code>~/oslab/linux-0.11/boot/</code>，执行<code>$ vi setup.s</code>，在末尾添加函数如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">...</div><div class="line">print_hex:</div><div class="line">	mov bp,sp</div><div class="line">	add bp,#2</div><div class="line">	mov cx,#4</div><div class="line">	mov dx,(bp)</div><div class="line">print_digit:</div><div class="line">	rol dx,#4</div><div class="line">	mov ax,#0xe0f</div><div class="line">	and al,dl</div><div class="line">	add al,#0x30</div><div class="line">	cmp al,#0x3a</div><div class="line">	jl outp</div><div class="line">	add al,#0x07</div><div class="line">outp:</div><div class="line">	int 0x10</div><div class="line">	loop print_digit</div><div class="line">	ret</div><div class="line">print_nl:</div><div class="line">	mov ax,#0xe0d</div><div class="line">	int 0x10</div><div class="line">	mov al,#0xa</div><div class="line">	int 0x10</div><div class="line">	</div><div class="line">.text</div><div class="line">endtext:</div><div class="line">.data</div><div class="line">enddata:</div><div class="line">.bss</div><div class="line">endbss:</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/linux-0.11/boot/</code>，执行<code>$ vi setup.s</code>，在获取内存大小的模块添加代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">...</div><div class="line">! Get memory size (extended mem, kB)</div><div class="line"></div><div class="line">    	mov	ah,#0x88</div><div class="line">    	int	0x15</div><div class="line">    	mov	[2],ax</div><div class="line"></div><div class="line">        mov     ah,#0x03                ! read cursor pos</div><div class="line">        xor     bh,bh</div><div class="line">        int     0x10</div><div class="line"></div><div class="line">        mov     cx,#14</div><div class="line">        mov     bx,#0x0007              ! page 0, attribute 7 (normal)</div><div class="line">        mov     bp,#memory</div><div class="line">        mov     ax,#0x1301              ! write string, move cursor</div><div class="line">        int     0x10</div><div class="line"></div><div class="line">        push [2]</div><div class="line">        call print_hex</div><div class="line">    	mov ax,#0xe4b</div><div class="line">    	int 0x10			! output &apos;K&apos;</div><div class="line">    	mov al,#0x42</div><div class="line">    	int 0x10			! output &apos;B&apos;</div><div class="line">        call print_nl</div><div class="line">        pop [2]</div><div class="line">...</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/linux-0.11/</code>，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> make BootImage</span></div></pre></td></tr></table></figure>
</li>
<li><p>进入目录<code>~/oslab/</code>，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ./run</span></div></pre></td></tr></table></figure>
</li>
<li><p>实验结果<br><img src="/images/5193451504420514329-wm.png" alt="实验楼"></p>
</li>
</ol>
<hr>
<h2 id="实验报告"><a href="#实验报告" class="headerlink" title="实验报告"></a>实验报告</h2><ol>
<li>计算机启动时，BIOS把中断表置于内存位置为0的地方，导致引导时必须把system代码先置于其他地方（0x10000），拷贝中断表后，再挪回地址0处。替代方案：BIOS可把中断表放置在其余不影响引导、且方便获取的地方。</li>
<li>由于实模式的地址计算方式保守，导致内存可寻址范围只有1MB，使得需要进入保护模式，才能采用32位地址寻址。替代方案：改变硬件的地址计算方式，使之直接采用32位地址寻址。 </li>
</ol>
<hr>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><ul>
<li><a href="http://gaufoo.com/code/lab1/bootsect.s" download="bootsect.s">bootsect.s</a></li>
<li><a href="http://gaufoo.com/code/lab1/setup.s" download="setup.s">setup.s</a></li>
<li><a href="http://gaufoo.com/code/lab1/build.c" download="build.c">build.c</a></li>
</ul>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;HIT操作系统课程第一个实验。&lt;/p&gt;
    
    </summary>
    
      <category term="原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/"/>
    
      <category term="操作系统" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="原理" scheme="http://gaufoo.com/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="操作系统" scheme="http://gaufoo.com/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络学习笔记（一）</title>
    <link href="http://gaufoo.com/2017/09/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://gaufoo.com/2017/09/03/计算机网络学习笔记（一）/</id>
    <published>2017-09-02T17:57:00.000Z</published>
    <updated>2017-09-06T09:18:14.944Z</updated>
    
    <content type="html"><![CDATA[<p>记录以备后用</p>
<a id="more"></a>
<hr>
<h2 id="计算机网络定义"><a href="#计算机网络定义" class="headerlink" title="计算机网络定义"></a>计算机网络定义</h2><ul>
<li>计算机网络就是<strong>互连</strong>的、<strong>自治</strong>的计算机集合。<ul>
<li>自治：无主从关系</li>
<li>互连：通过通信链路互联互通</li>
</ul>
</li>
<li>距离远、数量大时，通过<strong>交换网络</strong>互联主机。</li>
</ul>
<hr>
<h2 id="Internet-定义"><a href="#Internet-定义" class="headerlink" title="Internet 定义"></a>Internet 定义</h2><h3 id="组成细节角度"><a href="#组成细节角度" class="headerlink" title="组成细节角度"></a>组成细节角度</h3><ul>
<li>全球最大的<strong>互联网络</strong><ul>
<li>由ISP(Internet Service Provider)网络互连的“网络之网络”</li>
</ul>
</li>
<li>数以百万计的互连的<strong>计算设备</strong>集合<ul>
<li>主机(hosts) == 端系统(end systems)</li>
<li>运行各种网络应用</li>
</ul>
</li>
<li>通信链路<ul>
<li>光纤、铜缆、无线电、卫星……</li>
</ul>
</li>
<li>分组交换：转发分组(数据包)<ul>
<li>路由器(routers)</li>
<li>交换机(switches)</li>
</ul>
</li>
</ul>
<h3 id="服务提供角度"><a href="#服务提供角度" class="headerlink" title="服务提供角度"></a>服务提供角度</h3><ul>
<li>为网络应用提供通信服务<ul>
<li>Web, VolP, email, 电子商务, 社交网络</li>
</ul>
</li>
<li>为网络应用提供编程接口(API)<ul>
<li>支持应用程序“连接”Internet, 发送/接收数据</li>
<li>提供类似于邮政系统的数据传输服务</li>
</ul>
</li>
</ul>
<hr>
<h2 id="网络协议"><a href="#网络协议" class="headerlink" title="网络协议"></a>网络协议</h2><h3 id="类比"><a href="#类比" class="headerlink" title="类比"></a>类比</h3><ul>
<li>交通系统中的交通规则</li>
<li>人类交谈作为信息交换的过程，同样包括交流时间、问题请教、人员引荐等</li>
<li>网络通信<ul>
<li>通信<strong>主体</strong>：机器，而非人</li>
<li>交换“<strong>数字化</strong>”或“<strong>电子化</strong>”信息</li>
<li>所有通信过程必须遵循某些规则：<strong>协议</strong></li>
</ul>
</li>
</ul>
<h3 id="要素"><a href="#要素" class="headerlink" title="要素"></a>要素</h3><ul>
<li><strong>语法(Syntax)</strong><ul>
<li>数据与控制信息的结构或格式</li>
<li>信号电平</li>
</ul>
</li>
<li><strong>语义(Semantics)</strong><ul>
<li>需要发出何种控制信息</li>
<li>完成何种动作以及做出何种响应</li>
<li>差错控制</li>
</ul>
</li>
<li><strong>时序(Timing)</strong><ul>
<li>事件顺序</li>
<li>速度匹配</li>
</ul>
</li>
</ul>
<h3 id="Internet-协议标准"><a href="#Internet-协议标准" class="headerlink" title="Internet 协议标准"></a>Internet 协议标准</h3><ul>
<li>RFC：Request for Comments</li>
<li>IETF：互联网工程任务组(Internet Engineering Task Force)</li>
</ul>
<hr>
<h2 id="计算机网络结构"><a href="#计算机网络结构" class="headerlink" title="计算机网络结构"></a>计算机网络结构</h2><h3 id="网络边缘"><a href="#网络边缘" class="headerlink" title="网络边缘"></a>网络边缘</h3><ul>
<li>主机（端系统）</li>
<li>网络应用，如：Web，email</li>
<li>模型：<ul>
<li>客户/服务器（client/server）应用模型</li>
<li>对等（peer-peer，P2P）应用模型</li>
</ul>
</li>
</ul>
<h3 id="接入网络、物理介质"><a href="#接入网络、物理介质" class="headerlink" title="接入网络、物理介质"></a>接入网络、物理介质</h3><ul>
<li>有线或无线通信链路<ul>
<li>住宅（家庭）接入网络</li>
<li>机构接入网络（学校、企业等）</li>
<li>移动接入网络</li>
</ul>
</li>
<li>用户关心<ul>
<li>带宽（bps）</li>
<li>共享/独占</li>
</ul>
</li>
<li>类型<ul>
<li>电缆网络 - 频分多路复用</li>
<li>数字用户线路（DSL） - 电话线</li>
<li>Ethernet，端系统通常直接连接以太网交换机（switch）</li>
<li>无线接入网络 - 通过基站或“接入点”<ul>
<li>无线局域网（LANs）</li>
<li>广域无线接入 - 电信运营商（蜂窝网）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="网络核心（核心网络）"><a href="#网络核心（核心网络）" class="headerlink" title="网络核心（核心网络）"></a>网络核心（核心网络）</h3><ul>
<li>互连的路由器（或分组转发设备）</li>
<li>关键功能：<ul>
<li>路由（routing）</li>
<li>转发（forwarding）</li>
</ul>
</li>
</ul>
<hr>
<h2 id="Internet-结构"><a href="#Internet-结构" class="headerlink" title="Internet 结构"></a>Internet 结构</h2><ul>
<li>端系统通过<strong>接入ISP</strong>（access ISPs）连接到 Internet<ul>
<li>家庭、公司、大学 ISPs</li>
</ul>
</li>
<li>区域网络（regional networks）连接到<strong>接入ISP</strong>和运营商ISP</li>
<li>每一个<strong>接入ISP</strong>连接到大型ISP</li>
<li>大型ISP网络必须互连</li>
<li>网络中心：少数互连的大型网络<ul>
<li><strong>“一级”（tier-1）商业ISPs</strong>（如：网通、电信、Sprint、AT&amp;T），提供国家或国际范围的覆盖</li>
<li><strong>内容提供商网络</strong>（content provider network，如：Google），私有网络，连接其数据中心与Internet</li>
</ul>
</li>
</ul>
<hr>
<h2 id="数据交换"><a href="#数据交换" class="headerlink" title="数据交换"></a>数据交换</h2><h3 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h3><ul>
<li>典型：电话网络</li>
<li>阶段<ul>
<li>建立连接</li>
<li>通信</li>
<li>释放资源</li>
</ul>
</li>
<li>特点：独占资源 </li>
<li>解决：多路复用<ul>
<li>特点<ul>
<li>将资源片分配给各路“呼叫”</li>
<li>每路呼叫独占所分配资源</li>
<li>资源片可能闲置（idle）</li>
</ul>
</li>
<li>方法<ul>
<li>频分多路复用（“frequency” FDM）</li>
<li>时分多路复用（“time” TDM）</li>
<li>波分多路复用（“wavelength” WDM）</li>
<li>码分多路复用（“code” CDM）<ul>
<li>每个用户分配一个<strong>码片序列</strong></li>
<li>编码信号 = （原始数据）×（码片序列）</li>
<li>各用户码片序列互相<strong>正交</strong>（orthogonal）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h3><ul>
<li>报文：源（应用）发送信息整体</li>
</ul>
<h3 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h3><ul>
<li>分组：报文分拆出来的一系列相对较小的数据包</li>
<li>分组交换需要报文的拆分与重组</li>
<li>产生额外开销</li>
</ul>
<h3 id="报文-vs-分组"><a href="#报文-vs-分组" class="headerlink" title="报文 vs 分组"></a>报文 vs 分组</h3><ul>
<li>两者都是存储转发方式，区别：报文 - 完整报文，分组 - 较小的分组</li>
<li>报文：M bits 链路带宽：R bps 分组长度：L bits 路由器数：n<ul>
<li>分组交换：T = M/R + nL/R</li>
<li>报文交换：T = (n + 1)M/R</li>
</ul>
</li>
<li>分组交换允许更多用户同时使用网络，网络资源充分共享</li>
<li>分组交换缺陷<ol>
<li>适用于突发数据传输网络 </li>
<li>可能发生拥塞（congestion）：分组延迟和丢失 </li>
<li>无电路级性能保障。</li>
</ol>
</li>
</ul>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录以备后用&lt;/p&gt;
    
    </summary>
    
      <category term="原理" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/"/>
    
      <category term="计算机网络" scheme="http://gaufoo.com/categories/%E5%8E%9F%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="原理" scheme="http://gaufoo.com/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="网络" scheme="http://gaufoo.com/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>Python之BeautifulSoup库学习笔记</title>
    <link href="http://gaufoo.com/2017/09/01/Python%E4%B9%8BBeautifulSoup%E5%BA%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://gaufoo.com/2017/09/01/Python之BeautifulSoup库学习笔记/</id>
    <published>2017-08-31T16:44:09.000Z</published>
    <updated>2017-09-06T09:17:36.587Z</updated>
    
    <content type="html"><![CDATA[<p>记录以备后用</p>
<a id="more"></a>
<hr>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup = BeautifulSoup(<span class="string">'&lt;p&gt;data&lt;/p&gt;'</span>, <span class="string">'html.parser'</span>)</div></pre></td></tr></table></figure>
<hr>
<h2 id="基本元素"><a href="#基本元素" class="headerlink" title="基本元素"></a>基本元素</h2><ul>
<li><p><code>Tag</code>：标签，最基本的信息组织单元，分别用&lt;&gt;和&lt;/&gt;标明开头和结尾</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup = BeautifulSoup(<span class="string">'&lt;b class="boldest"&gt;Extremely bold&lt;/b&gt;'</span>, <span class="string">'html.parser'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag = soup.b</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(tag)</div><div class="line"><span class="comment"># &lt;class 'bs4.element.Tag'&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>Name</code>：标签的名字，<code>&lt;p&gt;…&lt;/p&gt;</code>的名字是’p’，格式：<code>&lt;tag&gt;.name</code></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag.name</div><div class="line"><span class="comment"># u'b'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag.name = <span class="string">"blockquote"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag</div><div class="line"><span class="comment"># &lt;blockquote class="boldest"&gt;Extremely bold&lt;/blockquote&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>Attributes</code>：标签的属性，字典形式组织，格式：<code>&lt;tag&gt;.attrs</code></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag[<span class="string">'class'</span>]</div><div class="line"><span class="comment"># u'boldest'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag.attrs</div><div class="line"><span class="comment"># &#123;u'class': u'boldest'&#125;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>tag的属性可以被添加,删除或修改</p>
</blockquote>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag[<span class="string">'class'</span>] = <span class="string">'verybold'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag[<span class="string">'id'</span>] = <span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag</div><div class="line"><span class="comment"># &lt;blockquote class="verybold" id="1"&gt;Extremely bold&lt;/blockquote&gt;</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> tag[<span class="string">'class'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> tag[<span class="string">'id'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag</div><div class="line"><span class="comment"># &lt;blockquote&gt;Extremely bold&lt;/blockquote&gt;</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag[<span class="string">'class'</span>]</div><div class="line"><span class="comment"># KeyError: 'class'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(tag.get(<span class="string">'class'</span>))</div><div class="line"><span class="comment"># None</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>NavigableString</code>：标签内非属性字符串，&lt;&gt;…&lt;/&gt;中字符串，格式：<code>&lt;tag&gt;.string</code></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>tag.string</div><div class="line"><span class="comment"># u'Extremely bold'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(tag.string)</div><div class="line"><span class="comment"># &lt;class 'bs4.element.NavigableString'&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>Comment</code>：标签内字符串的注释部分，一种特殊的NavigableString类型</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>markup = <span class="string">"&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup = BeautifulSoup(markup, <span class="string">'html.parser'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>comment = soup.b.string</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(comment)</div><div class="line"><span class="comment"># &lt;class 'bs4.element.Comment'&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="简单遍历"><a href="#简单遍历" class="headerlink" title="简单遍历"></a>简单遍历</h2><ul>
<li><p>只获得第一个tag</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.head</div><div class="line"><span class="comment"># &lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.title</div><div class="line"><span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.body.b</div><div class="line"><span class="comment"># &lt;b&gt;The Dormouse's story&lt;/b&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>获得所有tag</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">'a'</span>)</div><div class="line"><span class="comment"># [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="精确遍历"><a href="#精确遍历" class="headerlink" title="精确遍历"></a>精确遍历</h2><p><code>find_all(name, attrs, recursive, text, **kwargs)</code></p>
<ul>
<li><p><code>name</code>：name 参数可以查找所有名字为 name 的 tag</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">"title"</span>)</div><div class="line"><span class="comment"># [&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>keywork</code>：搜索时会把该参数当作指定名字 tag 的<strong>属性</strong>来搜索</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(id=<span class="string">'link2'</span>)</div><div class="line"><span class="comment"># [&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]</span></div></pre></td></tr></table></figure>
<p>  参数值为<code>True</code>，查找所有包含 id 属性的 tag</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(id=<span class="keyword">True</span>)</div><div class="line"><span class="comment"># [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span></div></pre></td></tr></table></figure>
<p>  <code>class_</code>：搜索有指定CSS类名的 tag。因为 class 是 python 的关键字，需要加下横线以区分</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">"a"</span>, class_=<span class="string">"sister"</span>)</div><div class="line"><span class="comment"># [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>attrs</code>：定义一个字典参数来搜索包含特殊属性的 tag</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>data_soup.find_all(attrs=&#123;<span class="string">"data-foo"</span>: <span class="string">"value"</span>&#125;)</div><div class="line"><span class="comment"># [&lt;div data-foo="value"&gt;foo!&lt;/div&gt;]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>text</code>：搜索文档中的字符串内容</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">"a"</span>, text=<span class="string">"Elsie"</span>)</div><div class="line"><span class="comment"># [&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>limit</code>：限制返回结果的<strong>数量</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">"a"</span>, limit=<span class="number">2</span>)</div><div class="line"><span class="comment"># [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,</span></div><div class="line"><span class="comment">#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>recursive</code>：value为False时，搜索tag的直接子节点</p>
</li>
</ul>
<hr>
<p><code>find(name, attrs, recursive, text, **kwargs)</code></p>
<p>与<code>find_all()</code>的区别：</p>
<ul>
<li><p><code>find()</code>只得到一个结果，<code>find_all()</code>得到结果的列表</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">'title'</span>, limit=<span class="number">1</span>)</div><div class="line"><span class="comment"># [&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find(<span class="string">'title'</span>)</div><div class="line"><span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>find_all()</code>方法没有找到目标是返回空列表，<code>find()</code> 方法找不到目标时,返回 None</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(soup.find(<span class="string">"nosuchtag"</span>))</div><div class="line"><span class="comment"># None</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="标签树的下行遍历"><a href="#标签树的下行遍历" class="headerlink" title="标签树的下行遍历"></a>标签树的下行遍历</h2><ul>
<li><code>.contents</code>：子节点的<strong>列表</strong>，将<tag>所有儿子节点存入列表</tag></li>
<li><code>.children</code>： 子节点的<strong>迭代类型</strong>，与<code>.contents</code>类似，用于循环遍历儿子节点</li>
<li><code>.descendants</code>： 子孙节点的<strong>迭代类型</strong>，包含所有子孙节点，用于循环遍历</li>
</ul>
<hr>
<h2 id="标签树的上行遍历"><a href="#标签树的上行遍历" class="headerlink" title="标签树的上行遍历"></a>标签树的上行遍历</h2><ul>
<li><code>.parent</code>： 节点的父亲标签</li>
<li><code>.parents</code>： 节点先辈标签的<strong>迭代类型</strong>，用于循环遍历先辈节点</li>
</ul>
<hr>
<h2 id="标签树的平行遍历"><a href="#标签树的平行遍历" class="headerlink" title="标签树的平行遍历"></a>标签树的平行遍历</h2><ul>
<li><code>.next_sibling</code>： 返回按照HTML文本顺序的下一个平行节点标签</li>
<li><code>.previous_sibling</code>： 返回按照HTML文本顺序的上一个平行节点标签</li>
<li><code>.next_siblings</code>： <strong>迭代类型</strong>，返回按照HTML文本顺序的后续所有平行节点标签</li>
<li><code>.previous_siblings</code>： <strong>迭代类型</strong>，返回按照HTML文本顺序的前续所有平行节点标签</li>
</ul>
<hr>
<h2 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(soup.prettify())</div></pre></td></tr></table></figure>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录以备后用&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Python" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
      <category term="Python" scheme="http://gaufoo.com/tags/Python/"/>
    
      <category term="web" scheme="http://gaufoo.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>生活中的不愉快</title>
    <link href="http://gaufoo.com/2017/09/01/%E7%94%9F%E6%B4%BB%E4%B8%AD%E7%9A%84%E4%B8%8D%E6%84%89%E5%BF%AB/"/>
    <id>http://gaufoo.com/2017/09/01/生活中的不愉快/</id>
    <published>2017-08-31T16:03:35.000Z</published>
    <updated>2017-09-06T09:18:18.241Z</updated>
    
    <content type="html"><![CDATA[<p>总会遇到被气的时刻，还得忍。</p>
<a id="more"></a>
<hr>
<p>总会有人不但不愿欣赏你的作品，甚至乐于践踏你的劳动成果。<br>学不会善良，总该学会尊重吧。学不会尊重，为什么不学学安静呢。<br>至少我还知道远离，五山那家咖啡厅挺不错。</p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;总会遇到被气的时刻，还得忍。&lt;/p&gt;
    
    </summary>
    
      <category term="不归" scheme="http://gaufoo.com/categories/%E4%B8%8D%E5%BD%92/"/>
    
    
  </entry>
  
  <entry>
    <title>JavaScript之鬼畜百度打砖块</title>
    <link href="http://gaufoo.com/2017/08/31/JavaScript%E4%B9%8B%E9%AC%BC%E7%95%9C%E7%99%BE%E5%BA%A6%E6%89%93%E7%A0%96%E5%9D%97/"/>
    <id>http://gaufoo.com/2017/08/31/JavaScript之鬼畜百度打砖块/</id>
    <published>2017-08-31T15:53:49.000Z</published>
    <updated>2017-09-06T09:17:15.853Z</updated>
    
    <content type="html"><![CDATA[<p>挖坑，待填。</p>
<a id="more"></a>
<hr>
<p>Version 1.1<br>17/09/01更新：修复碰撞判定BUG，优化碰撞算法。</p>
<p>碰撞算法如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">Paddle.collide = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (o.left &gt;= y.left + y.width || o.left + o.width &lt;= y.left) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (o.top &gt;= y.top + y.height || o.top + o.height &lt;= y.top) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> coByLR = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.abs(x.left + x.width - y.left)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> coByTB = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.abs(x.top + x.height - y.top)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> dist = <span class="built_in">Math</span>.min(coByLR(o, y), coByLR(y, o), coByTB(o, y), coByTB(y, o))</div><div class="line">    <span class="keyword">switch</span> (dist) &#123;</div><div class="line">        <span class="keyword">case</span> coByLR(y, o):</div><div class="line">            <span class="keyword">return</span> <span class="string">'L'</span></div><div class="line">        <span class="keyword">case</span> coByLR(o, y):</div><div class="line">            <span class="keyword">return</span> <span class="string">'R'</span></div><div class="line">        <span class="keyword">case</span> coByTB(y, o):</div><div class="line">            <span class="keyword">return</span> <span class="string">'T'</span></div><div class="line">        <span class="keyword">case</span> coByTB(o, y):</div><div class="line">            <span class="keyword">return</span> <span class="string">'B'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Ball.moveBack = <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> t = type</div><div class="line">    <span class="keyword">switch</span> (t) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'L'</span>:</div><div class="line">            o.speedLeft = -<span class="built_in">Math</span>.abs(o.speedLeft)</div><div class="line">            <span class="keyword">break</span></div><div class="line">        <span class="keyword">case</span> <span class="string">'R'</span>:</div><div class="line">            o.speedLeft = <span class="built_in">Math</span>.abs(o.speedLeft)</div><div class="line">            <span class="keyword">break</span></div><div class="line">        <span class="keyword">case</span> <span class="string">'T'</span>:</div><div class="line">            o.speedTop = -<span class="built_in">Math</span>.abs(o.speedTop)</div><div class="line">            <span class="keyword">break</span></div><div class="line">        <span class="keyword">case</span> <span class="string">'B'</span>:</div><div class="line">            o.speedTop = <span class="built_in">Math</span>.abs(o.speedTop)</div><div class="line">            <span class="keyword">break</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>完整代码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">global</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> Paddle = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> text = <span class="built_in">document</span>.querySelector(<span class="string">"span.bg.s_ipt_wr.quickdelete-wrap"</span>)</div><div class="line">		<span class="keyword">var</span> button = <span class="built_in">document</span>.querySelector(<span class="string">"#su"</span>)</div><div class="line">		text.style.position = <span class="string">"fixed"</span></div><div class="line">		button.style.position = <span class="string">"fixed"</span></div><div class="line">		<span class="keyword">var</span> textStyle = text.getClientRects()[<span class="number">0</span>]</div><div class="line">		<span class="keyword">var</span> buttonWidth = button.getClientRects()[<span class="number">0</span>].width</div><div class="line">		button.style.left = (textStyle.left + textStyle.width) + <span class="string">"px"</span></div><div class="line">		<span class="keyword">var</span> o = &#123;</div><div class="line">			text: text,</div><div class="line">			button: button,</div><div class="line">			left: textStyle.left,</div><div class="line">			top: textStyle.top,</div><div class="line">			height: textStyle.height,</div><div class="line">			width: textStyle.width + buttonWidth,</div><div class="line">			speed: <span class="number">15</span>,</div><div class="line">		&#125;</div><div class="line">		o.moveLeft = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> a = o.left - o.speed</div><div class="line">			<span class="keyword">if</span> (a &lt;= <span class="number">0</span>) &#123;</div><div class="line">				o.left = <span class="number">0</span></div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				o.left = a</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		o.moveRight = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> a = o.left + o.speed</div><div class="line">			<span class="keyword">if</span> (a + o.width &gt;= <span class="built_in">window</span>.innerWidth) &#123;</div><div class="line">				o.left = <span class="built_in">window</span>.innerWidth - o.width</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				o.left = a</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		o.collide = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</div><div class="line">			<span class="keyword">if</span> (o.left &gt;= y.left + y.width || o.left + o.width &lt;= y.left) &#123;</div><div class="line">				<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (o.top &gt;= y.top + y.height || o.top + o.height &lt;= y.top) &#123;</div><div class="line">				<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">var</span> coByLR = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">				<span class="keyword">return</span> <span class="built_in">Math</span>.abs(x.left + x.width - y.left)</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">var</span> coByTB = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">				<span class="keyword">return</span> <span class="built_in">Math</span>.abs(x.top + x.height - y.top)</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">var</span> dist = <span class="built_in">Math</span>.min(coByLR(o, y), coByLR(y, o), coByTB(o, y), coByTB(y, o))</div><div class="line">			<span class="keyword">switch</span> (dist) &#123;</div><div class="line">				<span class="keyword">case</span> coByLR(y, o):</div><div class="line">					<span class="keyword">return</span> <span class="string">'L'</span></div><div class="line">				<span class="keyword">case</span> coByLR(o, y):</div><div class="line">					<span class="keyword">return</span> <span class="string">'R'</span></div><div class="line">				<span class="keyword">case</span> coByTB(y, o):</div><div class="line">					<span class="keyword">return</span> <span class="string">'T'</span></div><div class="line">				<span class="keyword">case</span> coByTB(o, y):</div><div class="line">					<span class="keyword">return</span> <span class="string">'B'</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		o.drawObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			text.style.left = o.left + <span class="string">"px"</span></div><div class="line">			button.style.left = o.left + textStyle.width + <span class="string">"px"</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> o</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> Ball = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> ball = <span class="built_in">document</span>.querySelector(<span class="string">"div.qrcode-img"</span>)</div><div class="line">		ball.style.position = <span class="string">"fixed"</span></div><div class="line">		<span class="keyword">var</span> ballStyle = ball.getClientRects()[<span class="number">0</span>]</div><div class="line"></div><div class="line">		<span class="keyword">var</span> o = &#123;</div><div class="line">			ball: ball,</div><div class="line">			left: ballStyle.left,</div><div class="line">			top: ballStyle.top,</div><div class="line">			width: ballStyle.width,</div><div class="line">			height: ballStyle.height,</div><div class="line">			speedTop: <span class="number">20</span>,</div><div class="line">			speedLeft: <span class="number">20</span>,</div><div class="line">			fired: <span class="literal">false</span>,</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		o.fire = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			o.fired = <span class="literal">true</span></div><div class="line">		&#125;</div><div class="line">		o.move = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">if</span> (o.fired) &#123;</div><div class="line">				<span class="keyword">if</span> (o.left &lt; <span class="number">0</span> || o.left + o.width &gt; <span class="built_in">window</span>.innerWidth) &#123;</div><div class="line">					o.speedLeft = -o.speedLeft</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span> (o.top &lt; <span class="number">0</span> || o.top + o.height &gt; <span class="built_in">window</span>.innerHeight) &#123;</div><div class="line">					o.speedTop = -o.speedTop</div><div class="line">				&#125;</div><div class="line">				o.top += o.speedTop</div><div class="line">				o.left += o.speedLeft</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		o.moveBack = <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> t = type</div><div class="line">			<span class="keyword">switch</span> (t) &#123;</div><div class="line">				<span class="keyword">case</span> <span class="string">'L'</span>:</div><div class="line">					o.speedLeft = -<span class="built_in">Math</span>.abs(o.speedLeft)</div><div class="line">					<span class="keyword">break</span></div><div class="line">				<span class="keyword">case</span> <span class="string">'R'</span>:</div><div class="line">					o.speedLeft = <span class="built_in">Math</span>.abs(o.speedLeft)</div><div class="line">					<span class="keyword">break</span></div><div class="line">				<span class="keyword">case</span> <span class="string">'T'</span>:</div><div class="line">					o.speedTop = -<span class="built_in">Math</span>.abs(o.speedTop)</div><div class="line">					<span class="keyword">break</span></div><div class="line">				<span class="keyword">case</span> <span class="string">'B'</span>:</div><div class="line">					o.speedTop = <span class="built_in">Math</span>.abs(o.speedTop)</div><div class="line">					<span class="keyword">break</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		o.drawObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			ball.style.left = o.left + <span class="string">"px"</span></div><div class="line">			ball.style.top = o.top + <span class="string">"px"</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> o</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> GouGame = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> g = &#123;</div><div class="line">			actions: &#123;&#125;,</div><div class="line">			keydowns: &#123;&#125;,</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">window</span>.addEventListener(<span class="string">'keydown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">			g.keydowns[event.key] = <span class="literal">true</span></div><div class="line">		&#125;)</div><div class="line">		<span class="built_in">window</span>.addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">			g.keydowns[event.key] = <span class="literal">false</span></div><div class="line">		&#125;)</div><div class="line">		g.registerAction = <span class="function"><span class="keyword">function</span> (<span class="params">key, callback</span>) </span>&#123;</div><div class="line">			g.actions[key] = callback</div><div class="line">		&#125;</div><div class="line">		setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> actions = <span class="built_in">Object</span>.keys(g.actions)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; actions.length; i++) &#123;</div><div class="line">				<span class="keyword">var</span> key = actions[i]</div><div class="line">				<span class="keyword">if</span> (g.keydowns[key]) &#123;</div><div class="line">					g.actions[key]()</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			g.update()</div><div class="line">			g.draw()</div><div class="line">		&#125;, <span class="number">1000</span> / <span class="number">60</span>)</div><div class="line">		<span class="keyword">return</span> g</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> __main = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> game = GouGame()</div><div class="line">		<span class="keyword">var</span> paddle = Paddle()</div><div class="line">		<span class="keyword">var</span> ball = Ball()</div><div class="line">		game.registerAction(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			paddle.moveLeft()</div><div class="line">		&#125;)</div><div class="line">		game.registerAction(<span class="string">'d'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			paddle.moveRight()</div><div class="line">		&#125;)</div><div class="line">		game.registerAction(<span class="string">'f'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			ball.fire()</div><div class="line">		&#125;)</div><div class="line">		game.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> i = paddle.collide(ball)</div><div class="line">			<span class="keyword">if</span> (i) &#123;</div><div class="line">				ball.moveBack(i)</div><div class="line">			&#125;</div><div class="line">			ball.move()</div><div class="line">		&#125;</div><div class="line">		game.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			paddle.drawObj()</div><div class="line">			ball.drawObj()</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	__main()</div><div class="line"></div><div class="line">&#125;)(<span class="built_in">window</span>)</div></pre></td></tr></table></figure></p>
<hr>
<p>Version 1.0</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">global</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> Paddle = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> text = <span class="built_in">document</span>.querySelector(<span class="string">"span.bg.s_ipt_wr.quickdelete-wrap"</span>)</div><div class="line">        <span class="keyword">var</span> button = <span class="built_in">document</span>.querySelector(<span class="string">"#su"</span>)</div><div class="line">        text.style.position = <span class="string">"fixed"</span></div><div class="line">        button.style.position = <span class="string">"fixed"</span></div><div class="line">        <span class="keyword">var</span> textStyle = text.getClientRects()[<span class="number">0</span>]</div><div class="line">        <span class="keyword">var</span> buttonWidth = button.getClientRects()[<span class="number">0</span>].width</div><div class="line">        button.style.left = (textStyle.left + textStyle.width) + <span class="string">"px"</span></div><div class="line"></div><div class="line">        <span class="keyword">var</span> o = &#123;</div><div class="line">            text: text,</div><div class="line">            button: button,</div><div class="line">            left: textStyle.left,</div><div class="line">            top: textStyle.top,</div><div class="line">            height: textStyle.height,</div><div class="line">            width: textStyle.width + buttonWidth,</div><div class="line">            speed: <span class="number">15</span>,</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.moveLeft = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> a = o.left - o.speed</div><div class="line">            <span class="keyword">if</span> (a &lt;= <span class="number">0</span>) &#123;</div><div class="line">                o.left = <span class="number">0</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                o.left = a</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        o.moveRight = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> a = o.left + o.speed</div><div class="line">            <span class="keyword">if</span> (a + o.width &gt;= <span class="built_in">window</span>.innerWidth) &#123;</div><div class="line">                o.left = <span class="built_in">window</span>.innerWidth - o.width</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                o.left = a</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.collide = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (o.left &gt;= y.left &amp;&amp; o.left &gt;= y.left + y.width) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (o.left &lt;= y.left &amp;&amp; o.left + o.width &lt;= y.left) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (o.top &gt;= y.top &amp;&amp; o.top &gt;= y.top + y.height) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (o.top &lt;= y.top &amp;&amp; o.top + o.height &lt;= y.top) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.drawObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            text.style.left = o.left + <span class="string">"px"</span></div><div class="line">            button.style.left = o.left + textStyle.width + <span class="string">"px"</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> o</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> Ball = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ball = <span class="built_in">document</span>.querySelector(<span class="string">"div.qrcode-img"</span>)</div><div class="line">        ball.style.position = <span class="string">"fixed"</span></div><div class="line">        <span class="keyword">var</span> ballStyle = ball.getClientRects()[<span class="number">0</span>]</div><div class="line">        <span class="keyword">var</span> o = &#123;</div><div class="line">            ball: ball,</div><div class="line">            left: ballStyle.left,</div><div class="line">            top: ballStyle.top,</div><div class="line">            width: ballStyle.width,</div><div class="line">            height: ballStyle.height,</div><div class="line">            speedTop: <span class="number">10</span>,</div><div class="line">            speedLeft: <span class="number">10</span>,</div><div class="line">            fired: <span class="literal">false</span>,</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.fire = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            o.fired = <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.move = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (o.fired) &#123;</div><div class="line">                <span class="keyword">if</span> (o.left &lt; <span class="number">0</span> || o.left + o.width &gt; <span class="built_in">window</span>.innerWidth) &#123;</div><div class="line">                    o.speedLeft = -o.speedLeft</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (o.top &lt; <span class="number">0</span> || o.top + o.height &gt; <span class="built_in">window</span>.innerHeight) &#123;</div><div class="line">                    o.speedTop = -o.speedTop</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                o.top += o.speedTop</div><div class="line">                o.left += o.speedLeft</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.moveBack = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            o.speedTop = -o.speedTop</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        o.drawObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            ball.style.left = o.left + <span class="string">"px"</span></div><div class="line">            ball.style.top = o.top + <span class="string">"px"</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> o</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> GouGame = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> g = &#123;</div><div class="line">            actions: &#123;&#125;,</div><div class="line">            keydowns: &#123;&#125;,</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'keydown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">            g.keydowns[event.key] = <span class="literal">true</span></div><div class="line">        &#125;)</div><div class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">            g.keydowns[event.key] = <span class="literal">false</span></div><div class="line">        &#125;)</div><div class="line">        g.registerAction = <span class="function"><span class="keyword">function</span> (<span class="params">key, callback</span>) </span>&#123;</div><div class="line">            g.actions[key] = callback</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> actions = <span class="built_in">Object</span>.keys(g.actions)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; actions.length; i++) &#123;</div><div class="line">                <span class="keyword">var</span> key = actions[i]</div><div class="line">                <span class="keyword">if</span> (g.keydowns[key]) &#123;</div><div class="line">                    g.actions[key]()</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            g.update()</div><div class="line">            g.draw()</div><div class="line">        &#125;, <span class="number">1000</span> / <span class="number">60</span>)</div><div class="line"></div><div class="line">        <span class="keyword">return</span> g</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> __main = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> game = GouGame()</div><div class="line">        <span class="keyword">var</span> paddle = Paddle()</div><div class="line">        <span class="keyword">var</span> ball = Ball()</div><div class="line"></div><div class="line">        game.registerAction(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            paddle.moveLeft()</div><div class="line">        &#125;)</div><div class="line">        game.registerAction(<span class="string">'d'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            paddle.moveRight()</div><div class="line">        &#125;)</div><div class="line">        game.registerAction(<span class="string">'f'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            ball.fire()</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">        game.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (paddle.collide(ball)) &#123;</div><div class="line">                ball.moveBack()</div><div class="line">            &#125;</div><div class="line">            ball.move()</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        game.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            paddle.drawObj()</div><div class="line">            ball.drawObj()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    __main()</div><div class="line">&#125;)(<span class="built_in">window</span>)</div></pre></td></tr></table></figure>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;挖坑，待填。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="JavaScript" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://gaufoo.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript之快速理解同步、异步、回调</title>
    <link href="http://gaufoo.com/2017/08/31/JavaScript%E4%B9%8B%E5%BF%AB%E9%80%9F%E7%90%86%E8%A7%A3%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5%E3%80%81%E5%9B%9E%E8%B0%83/"/>
    <id>http://gaufoo.com/2017/08/31/JavaScript之快速理解同步、异步、回调/</id>
    <published>2017-08-31T06:29:50.000Z</published>
    <updated>2017-09-07T08:55:49.457Z</updated>
    
    <content type="html"><![CDATA[<p>今天终于对这几个概念有了更深入的理解，下面是讲解。</p>
<a id="more"></a>
<hr>
<h2 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h2><p>想象一个场景：你约了女神去玩，结果睡过了头。女神在目的地等了很久，心情越来越烦躁。你到达时，女神甩了你好几个耳光。</p>
<p>不太了解JS同步、异步、回调机制的新手，可能会这样来写代码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">dating</span>(<span class="params">hours</span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> SP = <span class="number">0</span>; <span class="comment">// SP,愤怒值 </span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hours; i++) &#123;</div><div class="line">			setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">				SP++</div><div class="line">			&#125;, <span class="number">1000</span>)</div><div class="line">		&#125;</div><div class="line">		onBack(SP)</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">onBack</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">		alert(<span class="string">"我来迟了!"</span>)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</div><div class="line">			<span class="built_in">console</span>.log(<span class="string">"打了"</span> + i + <span class="string">"个耳光\n"</span>)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	dating(<span class="number">5</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>控制台却输出了这样的结果：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">弹窗：我来迟了！</div><div class="line">等了<span class="number">5</span>个小时</div><div class="line">等了<span class="number">5</span>个小时</div><div class="line">等了<span class="number">5</span>个小时</div><div class="line">等了<span class="number">5</span>个小时</div><div class="line">等了<span class="number">5</span>个小时</div></pre></td></tr></table></figure></p>
<p>简直莫名其妙，瞬间弹窗，耳光也没有打，小时数也不对。</p>
<hr>
<h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><p>一行行看：</p>
<ul>
<li><p><strong>首先</strong>调用<code>dating(5)</code>。声明变量后，到达：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hours; i++) &#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">		SP++</div><div class="line">	&#125;, <span class="number">1000</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  <code>setTimeout</code>是<strong>回调</strong>函数，JS会把它<strong>丢到一边</strong>。这个循环捕获的5个回调函数，都被<strong>搁置</strong>了。但<code>i</code>已经变成了5。</p>
</li>
<li><p><strong>然后</strong>到达：<code>onBack(SP)</code>。注意，由于上面没有执行回调函数，因此此时<code>SP</code>值为0。因此，<code>onBack(0)</code>得到的结果就是弹窗一次，不<code>log</code>。</p>
</li>
<li><p><strong>最后</strong>同步代码都执行完了，这时该乖乖等异步和回调了。一秒后，5个<code>setTimeout</code>全到了执行的时机，于是<code>&quot;等了5个小时&quot;</code>就齐刷刷地出来了。</p>
</li>
</ul>
<hr>
<h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">dating</span>(<span class="params">hours, callBack</span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> SP = <span class="number">0</span>; <span class="comment">// SP,愤怒值 </span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hours; i++) &#123;</div><div class="line">			(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">				setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">					<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">					SP++</div><div class="line">					<span class="keyword">if</span> (i + <span class="number">1</span> === hours) &#123;</div><div class="line">						callBack(SP)</div><div class="line">					&#125;</div><div class="line">				&#125;, i * <span class="number">1000</span>)</div><div class="line">			&#125;)(i)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">onBack</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">		alert(<span class="string">"我来迟了!"</span>)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</div><div class="line">			<span class="built_in">console</span>.log(<span class="string">"打了"</span> + i + <span class="string">"个耳光\n"</span>)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	dating(<span class="number">5</span>, onBack)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>修改了<code>dating</code>函数，代码难看了不少。执行过程会变成怎样呢？</p>
<hr>
<p>当<code>dating</code>进入<code>for</code>循环，执行了5个函数：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">		SP++</div><div class="line">		<span class="keyword">if</span> (i + <span class="number">1</span> === hours) &#123;</div><div class="line">			callBack(SP)</div><div class="line">		&#125;</div><div class="line">	&#125;, i * <span class="number">1000</span>)</div><div class="line">&#125;)(<span class="number">0</span>)</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">		SP++</div><div class="line">		<span class="keyword">if</span> (i + <span class="number">1</span> === hours) &#123;</div><div class="line">			callBack(SP)</div><div class="line">		&#125;</div><div class="line">	&#125;, i * <span class="number">1000</span>)</div><div class="line">&#125;)(<span class="number">1</span>)</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">		SP++</div><div class="line">		<span class="keyword">if</span> (i + <span class="number">1</span> === hours) &#123;</div><div class="line">			callBack(SP)</div><div class="line">		&#125;</div><div class="line">	&#125;, i * <span class="number">1000</span>)</div><div class="line">&#125;)(<span class="number">2</span>)</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">		SP++</div><div class="line">		<span class="keyword">if</span> (i + <span class="number">1</span> === hours) &#123;</div><div class="line">			callBack(SP)</div><div class="line">		&#125;</div><div class="line">	&#125;, i * <span class="number">1000</span>)</div><div class="line">&#125;)(<span class="number">3</span>)</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"等了"</span> + i + <span class="string">"个小时"</span>)</div><div class="line">		SP++</div><div class="line">		<span class="keyword">if</span> (i + <span class="number">1</span> === hours) &#123;</div><div class="line">			callBack(SP)</div><div class="line">		&#125;</div><div class="line">	&#125;, i * <span class="number">1000</span>)</div><div class="line">&#125;)(<span class="number">4</span>)</div></pre></td></tr></table></figure></p>
<p>因为<code>i</code>作为<strong>参数</strong>传入匿名函数内，因此会被<strong>保存</strong>下来。此时获得了5个延时分别为0 ms, 1000 ms, 2000 ms, 3000 ms, 4000 ms 的<code>setTimeout</code>，而且已经没有任何同步代码了，开始执行或执行异步和回调。<br>等到花儿都谢了，终于轮到4000 ms 的<code>setTimeout</code>，<code>if</code>判断生效，执行<code>callBack(SP)</code>。果断地甩了0,1,2,3,4个耳光。控制台输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">等了0个小时</div><div class="line">等了1个小时</div><div class="line">等了2个小时</div><div class="line">等了3个小时</div><div class="line">等了4个小时</div><div class="line">弹窗：我来迟了！</div><div class="line">打了0个耳光</div><div class="line">打了1个耳光</div><div class="line">打了2个耳光</div><div class="line">打了3个耳光</div><div class="line">打了4个耳光</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="思维锻炼"><a href="#思维锻炼" class="headerlink" title="思维锻炼"></a>思维锻炼</h2><p>求下面代码的输出：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Promise</span>(</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">2</span>), <span class="number">0</span>)</div><div class="line">            <span class="built_in">console</span>.log(<span class="number">3</span>)</div><div class="line">            <span class="built_in">console</span>.log(<span class="number">4</span>)</div><div class="line">            resolve(<span class="literal">true</span>)</div><div class="line">        &#125;</div><div class="line">    )</div><div class="line">    a.then(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="number">8</span>)</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    <span class="keyword">let</span> b = <span class="keyword">new</span> <span class="built_in">Promise</span>(</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="number">5</span>)</div><div class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">6</span>), <span class="number">0</span>)</div><div class="line">        &#125;</div><div class="line">    )</div><div class="line"></div><div class="line">    <span class="built_in">console</span>.log(<span class="number">7</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>答案：右键-&gt;检查-&gt;console-&gt;复制粘贴-&gt;回车</p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天终于对这几个概念有了更深入的理解，下面是讲解。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="JavaScript" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://gaufoo.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Python之Requests库学习笔记</title>
    <link href="http://gaufoo.com/2017/08/30/Python%E4%B9%8BRequests%E5%BA%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://gaufoo.com/2017/08/30/Python之Requests库学习笔记/</id>
    <published>2017-08-30T15:59:39.000Z</published>
    <updated>2017-09-06T09:17:44.025Z</updated>
    
    <content type="html"><![CDATA[<p>记录以备后用</p>
<a id="more"></a>
<hr>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><ul>
<li><code>requests.request(method, url, **kwargs)</code>   // 最主要, 其他方法都是由此方法封装而来</li>
<li><code>requests.get(url, params=None, **kwargs)</code>  // 最常用</li>
<li><code>requests.head(url, **kwargs)</code>  // 只拿head</li>
<li><code>requests.post(url, data=None, json=None, **kwargs)</code></li>
<li><code>requests.put(url, data=None, **kwargs)</code></li>
<li><code>requests.patch(url, data=None, **kwargs)</code></li>
<li><code>requests.delete(url, **kwargs)</code></li>
</ul>
<hr>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><ul>
<li><p><code>params</code> : 字典或字节序列，作为参数增加到url中</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>kv = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: <span class="string">'value2'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'GET'</span>, <span class="string">'http://python123.io/ws'</span>, params=kv)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(r.url)</div><div class="line">http://python123.io/ws?key1=value1&amp;key2=value2</div></pre></td></tr></table></figure>
</li>
<li><p><code>data</code> : 字典、字节序列或文件对象，作为Request的内容</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>kv = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: <span class="string">'value2'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'POST'</span>, <span class="string">'http://python123.io/ws'</span>, data=kv)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(r.text)</div><div class="line">&#123; ...</div><div class="line">    <span class="string">"form"</span>: &#123;</div><div class="line">    <span class="string">"key2"</span>: <span class="string">"value2"</span>,</div><div class="line">    <span class="string">"key1"</span>: <span class="string">"value1"</span></div><div class="line">    &#125;,</div><div class="line">&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>body = <span class="string">'主体内容'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'POST'</span>, <span class="string">'http://python123.io/ws'</span>, data=body)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(r.text)</div><div class="line">&#123; ...</div><div class="line">    <span class="string">"data"</span>: <span class="string">"主体内容"</span>,</div><div class="line">    <span class="string">"form"</span>: &#123;&#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><code>json</code> : JSON格式的数据，作为Request的内容</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>kv = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'POST'</span>, <span class="string">'http://python123.io/ws'</span>, json=kv)</div></pre></td></tr></table></figure>
</li>
<li><p><code>headers</code> : 字典，HTTP定制头</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>hd = &#123;<span class="string">'user‐agent'</span>: <span class="string">'Chrome/10'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'POST'</span>, <span class="string">'http://python123.io/ws'</span>, headers=hd)</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><code>cookies</code> : 字典或CookieJar，Request中的cookie</p>
</li>
<li><p><code>auth</code> : 元组，支持HTTP认证功能</p>
</li>
<li><p><code>files</code> : 字典类型，传输文件</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>fs = &#123;<span class="string">'file'</span>: open(<span class="string">'data.xls'</span>, <span class="string">'rb'</span>)&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'POST'</span>, <span class="string">'http://python123.io/ws'</span>, files=fs)</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><code>timeout</code> : 设定超时时间，单位为秒  <figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'GET'</span>, <span class="string">'http://www.baidu.com'</span>, timeout=<span class="number">10</span>)</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><code>proxies</code> : 字典类型，设定访问代理服务器，可以增加登录认证  <figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>pxs = &#123; <span class="string">'http'</span>: <span class="string">'http://user:pass@10.10.10.1:1234'</span></div><div class="line">            <span class="string">'https'</span>: <span class="string">'https://10.10.10.1:4321'</span> &#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.request(<span class="string">'GET'</span>, <span class="string">'http://www.baidu.com'</span>, proxies=pxs)</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><code>allow_redirects</code> : True/False，默认为True，重定向开关</li>
<li><code>stream</code> : True/False，默认为True，获取内容立即下载开关</li>
<li><code>verify</code> : True/False，默认为True，认证SSL证书开关</li>
<li><code>cert</code> : 本地SSL证书路径</li>
</ul>
<hr>
<h2 id="Response对象的属性"><a href="#Response对象的属性" class="headerlink" title="Response对象的属性"></a>Response对象的属性</h2><ul>
<li><code>r.status_code</code>: HTTP请求的返回状态，200表示连接成功，其余表示失败</li>
<li><code>r.text</code>: HTTP响应内容的字符串形式，即url对应的页面内容</li>
<li><code>r.encoding</code>: 从HTTP header中<strong>猜测</strong>的响应内容编码方式</li>
<li><code>r.apparent_encoding</code>: 从内容中分析出的响应内容编码方式（备选编码方式）</li>
<li><code>r.content</code>: HTTP响应内容的二进制形式</li>
</ul>
<hr>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><ul>
<li><code>requests.ConnectionError</code>: 网络连接错误异常，如DNS查询失败、拒绝连接等</li>
<li><code>requests.HTTPError</code>: HTTP错误异常</li>
<li><code>requests.URLRequired</code>: URL缺失异常</li>
<li><code>requests.TooManyRedirects</code>: 超过最大重定向次数，产生重定向异常</li>
<li><code>requests.ConnectTimeout</code>: 连接远程服务器超时异常</li>
<li><code>requests.Timeout</code>: 请求URL超时，产生超时异常</li>
</ul>
<h3 id="判断异常的方法"><a href="#判断异常的方法" class="headerlink" title="判断异常的方法"></a>判断异常的方法</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.get(url)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r.raise_for_status()</div></pre></td></tr></table></figure>
<p><code>r.raise_for_status()</code>: 如果不是200，产生异常 <code>requests.HTTPError</code></p>
<p><code>r.raise_for_status()</code>在方法内部判断<code>r.status_code</code>是否等于200，不需要增加额外的if语句，该语句便于利用try‐except进行异常处理</p>
<hr>
<h2 id="爬取网页的通用代码框架"><a href="#爬取网页的通用代码框架" class="headerlink" title="爬取网页的通用代码框架"></a>爬取网页的通用代码框架</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        r = requests.get(url,timeout = <span class="number">30</span>)</div><div class="line">        r.raise_for_status()</div><div class="line">        r.encoding = r.apparent_encoding</div><div class="line">        <span class="keyword">return</span> r.text</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">"产生异常"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    url = <span class="string">"https://www.baidu.com"</span></div><div class="line">    print(getHTMLText(url))</div></pre></td></tr></table></figure>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录以备后用&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Python" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
      <category term="Python" scheme="http://gaufoo.com/tags/Python/"/>
    
      <category term="web" scheme="http://gaufoo.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>C的表达式、语句与副作用</title>
    <link href="http://gaufoo.com/2017/08/30/C%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%E3%80%81%E8%AF%AD%E5%8F%A5%E4%B8%8E%E5%89%AF%E4%BD%9C%E7%94%A8/"/>
    <id>http://gaufoo.com/2017/08/30/C的表达式、语句与副作用/</id>
    <published>2017-08-30T11:17:05.000Z</published>
    <updated>2017-09-16T07:48:48.363Z</updated>
    
    <content type="html"><![CDATA[<p>C语言中，通常利用副作用来完成我们的目标。但由于副作用产生的时机，其结果有时会让人疑惑。</p>
<a id="more"></a>
<hr>
<p>知乎上有这样一个<a href="https://www.zhihu.com/question/64370774/answer/219591438" target="_blank" rel="external">问题</a>:</p>
<blockquote>
<p><strong>C语言中 *p++ = *p 是如何工作的？</strong><br>我在测试一个运算符优先级的代码的时候，碰见了这个问题，我没法用自己的方式理解，很抱歉打扰各位，希望你们在闲暇之余，能解答一下我的困惑。</p>
<p>示例代码：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LEN 5</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="built_in">printf</span> (<span class="string">"Hello World"</span>);</div><div class="line">	<span class="keyword">int</span> a[LEN] = &#123; <span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span> &#125;;</div><div class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> *p = a;</div><div class="line"> </div><div class="line">	<span class="keyword">for</span> (; i &lt; LEN; ++i)</div><div class="line">	&#123;</div><div class="line">		*p++ = *p;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; LEN; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>问题的解答需要了解这些概念：</p>
<hr>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="顺序点"><a href="#顺序点" class="headerlink" title="顺序点"></a>顺序点</h3><blockquote>
<p>A sequence point is a point in program execution at which all side effects are evaluated before going on to the next step. In C, the semicolon in a statement marks a sequence point. That means all changes made by assignment operators, increment operators, and decrement operators in a statement must take place before a program proceeds to the next statement. Some operators that we’ll discuss in later chapters have sequence points. Also, the end of any full expression is a sequence point.</p>
</blockquote>
<p>在顺序点处，所有的副作用都在进入下一步前被计算。也就是说，一句语句中的赋值、自增、自减所作出的改变必须在程序进入下一个语句前发生。在C中，语句里的<strong>分号</strong>标志了一个顺序点。任何一个<strong>完整的表达式</strong>的结束也是一个顺序点。另，<code>while(x++ &lt; 10 &amp;&amp; x + y &lt; 20)</code>里的<code>&amp;&amp;</code>也是顺序点。<br>但是，顺序点前的语句包含的改变，并<strong>没有保证</strong>在哪个表达式执行后发生。其结果取决于编译器的处理。</p>
<h3 id="完整的表达式"><a href="#完整的表达式" class="headerlink" title="完整的表达式"></a>完整的表达式</h3><blockquote>
<p>What’s a full expression? A full expression is one that’s not a subexpression of a larger expression. Examples of full expressions include the expression in an expression statement and the expression serving as a test condition for a while loop.</p>
</blockquote>
<p>完整的表达式不应该是更大的表达式中的子表达式。而是那些在表达式<strong>语句</strong>里的、以及在一个<code>while</code>循环里作为<strong>判断条件</strong>的表达式。</p>
<hr>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><p>考虑：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = <span class="number">0</span>;</div><div class="line">y = (<span class="number">4</span> + x++) + (<span class="number">6</span> + x++);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"x = %d y = %d\n"</span>, x, y);</div></pre></td></tr></table></figure></p>
<p>C只能保证下一条语句前<code>x</code>自增了两次，却没有保证<code>x</code>是某个子表达式被计算后增加还是整个表达式被求值后增加。</p>
<ul>
<li>第一种情况，x在整个表达式被求值后才自增：x = 2 y = 10</li>
<li>第二种情况，(4 + x++)先求值，且x在被求值后自增，再求值(6 + x++)：x = 2 y = 11</li>
<li>第三种情况，(6 + x++)先求值，且x在被求值后自增，再求值(4 + x++)：x = 2 y = 11</li>
</ul>
<hr>
<h2 id="题目的解答"><a href="#题目的解答" class="headerlink" title="题目的解答"></a>题目的解答</h2><blockquote><code>*p++=*p;</code><br>这一句话一共包含了四个操作：<br>1. <code>*p</code> // 等号左边那个<br>2. <code>p++</code><br>3. <code>*p</code><br>4. <code>=</code><br>这些操作的所有依赖关系如下：<br><li> 1(<code>*p</code>)在2(<code>p++</code>)之前执行<br></li><li> 4(<code>=</code>)在1(<code>*p</code>)和3(<code>*p</code>)之后执行<br>有了这个约束，那么这四个操作的所有可能的顺序就有（人肉枚举有可能出错你自己检查）：<br></li><li> 1234<br></li><li> 1324<br></li><li> 1342<br></li><li> 3124<br></li><li> 3142<br><br>分别的意思就是<br></li><li> p[0]=p[1];p++;<br></li><li> p[0]=p[0];p++;<br></li><li> p[0]=p[0];p++;<br></li><li> p[0]=p[0];p++;<br></li><li> p[0]=p[0];p++;<br><br>作者：vczh<br>链接：<a href="https://www.zhihu.com/question/64370774/answer/219580436" target="_blank" rel="external">https://www.zhihu.com/question/64370774/answer/219580436</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br></li></blockquote>

<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;C语言中，通常利用副作用来完成我们的目标。但由于副作用产生的时机，其结果有时会让人疑惑。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="C" scheme="http://gaufoo.com/categories/%E7%BC%96%E7%A8%8B/C/"/>
    
    
      <category term="C" scheme="http://gaufoo.com/tags/C/"/>
    
  </entry>
  
</feed>
